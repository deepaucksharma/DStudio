site_name: The Compendium of Distributed Systems
site_url: https://deepaucksharma.github.io/DStudio/
site_description: Learn distributed systems from first principles through physics and mathematics
site_author: Deepak Sharma

# Copyright
copyright: Copyright &copy; 2025 Deepak Sharma

# Repository
repo_name: deepaucksharma/DStudio
repo_url: https://github.com/deepaucksharma/DStudio
edit_uri: edit/main/docs/

# Theme Configuration
theme:
  name: material
  language: en
  
  features:
    # Navigation
    - navigation.instant
    - navigation.instant.prefetch
    - navigation.instant.progress
    - navigation.tracking
    - navigation.tabs
    - navigation.tabs.sticky
    - navigation.sections
    - navigation.expand
    - navigation.path
    - navigation.prune        # Remove inactive sections from sidebar
    - navigation.indexes
    - navigation.top          # Back to top button
    - navigation.footer       # Previous/Next navigation
    
    # Table of Contents
    - toc.follow
    - toc.integrate
    
    # Search
    - search.suggest
    - search.highlight
    - search.share
    
    # Content
    - content.code.copy
    - content.code.annotate
    - content.code.select
    - content.action.edit
    - content.action.view
    - content.tooltips        # Better tooltips
    - content.tabs.link       # Link content tabs
    
    # Header
    - header.autohide         # Hide header on scroll
    
    # Announcement bar
    - announce.dismiss
    
  palette:
    - media: "(prefers-color-scheme)"
      toggle:
        icon: material/brightness-auto
        name: Switch to light mode
    - media: "(prefers-color-scheme: light)"
      scheme: default
      primary: indigo
      accent: cyan
      toggle:
        icon: material/weather-sunny
        name: Switch to dark mode
    - media: "(prefers-color-scheme: dark)"
      scheme: slate
      primary: indigo
      accent: cyan
      toggle:
        icon: material/weather-night
        name: Switch to auto
        
  font:
    text: Inter
    code: JetBrains Mono
    
  icon:
    logo: material/book-open-variant
    repo: fontawesome/brands/github

# Plugins
plugins:
  - search:
      separator: '[\s\u200b\-_,:!=\[\]()"`/]+|\.(?!\d)|&[lg]t;|(?!\b)(?=[A-Z][a-z])'
      lang:
        - en
      pipeline:
        - stemmer
        - stopWordFilter
        - trimmer
  - macros:
      module_name: docs/macros
      include_dir: docs/templates
      on_error_fail: false
      on_undefined: strict
  - mermaid2:
      arguments:
        theme: |
          ^(JSON.parse(window.localStorage.getItem("data-md-color-scheme")) === "slate") ? "dark" : "default"
        themeVariables:
          primaryColor: "#5448C8"
          primaryTextColor: "#ffffff"
          primaryBorderColor: "#5448C8"
          lineColor: "#6366f1"
          sectionBkgColor: "#f8fafc"
          altSectionBkgColor: "#f1f5f9"
          gridColor: "#e2e8f0"
          secondaryColor: "#00BCD4"
          tertiaryColor: "#f3f4f6"
  - tags
  - markdown-exec

# Markdown Extensions
markdown_extensions:
  # Python Markdown Core Extensions
  - abbr
  - admonition
  - attr_list
  - def_list
  - footnotes
  - md_in_html
  - meta
  - tables
  - toc:
      permalink: true
      permalink_title: Anchor link to this section
      toc_depth: 4
  
  # PyMdownx Extensions - Content Enhancement
  - pymdownx.arithmatex:
      generic: true
  - pymdownx.betterem:
      smart_enable: all
  - pymdownx.caret
  - pymdownx.critic:
      mode: view
  - pymdownx.details
  - pymdownx.emoji:
      emoji_index: !!python/name:material.extensions.emoji.twemoji
      emoji_generator: !!python/name:material.extensions.emoji.to_svg
  - pymdownx.magiclink:
      repo_url_shorthand: true
      user: deepaucksharma
      repo: DStudio
      normalize_issue_symbols: true
  - pymdownx.mark
  - pymdownx.smartsymbols
  - pymdownx.tilde
  
  # PyMdownx Extensions - Code & Syntax
  - pymdownx.highlight:
      anchor_linenums: true
      line_spans: __span
      pygments_lang_class: true
      use_pygments: true
      guess_lang: false
      linenums_style: pymdownx-inline
  - pymdownx.inlinehilite:
      style_plain_text: true
  - pymdownx.keys
  - pymdownx.snippets:
      check_paths: true
      base_path: [docs]
      url_download: true
      url_max_size: 33554432
      url_timeout: 10.0
      
  # PyMdownx Extensions - Advanced Features
  - pymdownx.superfences:
      preserve_tabs: true
      custom_fences:
        - name: mermaid
          class: mermaid
          format: !!python/name:pymdownx.superfences.fence_code_format
        - name: math
          class: arithmatex
          format: !!python/name:pymdownx.arithmatex.fence_mathjax_format
  - pymdownx.tabbed:
      alternate_style: true
      combine_header_slug: true
      slugify: !!python/object/apply:pymdownx.slugs.slugify
        kwds:
          case: lower
  - pymdownx.tasklist:
      custom_checkbox: true
      clickable_checkbox: true
  
  # Additional Advanced Extensions
  - pymdownx.striphtml:
      strip_js_on_attributes: false
  - pymdownx.progressbar:
      level_class: true
      add_classes: "progress-bar"
  - pymdownx.escapeall:
      hardbreak: true
      nbsp: true
  - nl2br  # Convert newlines to <br> tags

# Extra CSS
extra_css:
  - stylesheets/layout.css
  - stylesheets/custom.css

# Extra JavaScript - Optimized Loading
extra_javascript:
  # MathJax Configuration First
  - javascripts/mathjax-config.js
  
  # MathJax Library - Use specific version for stability
  - https://cdn.jsdelivr.net/npm/mathjax@3.2.2/es5/tex-mml-chtml.js
  
  # Custom Scripts
  - javascripts/custom.js

# Extra Configuration
extra:
  generator: false
  social:
    - icon: fontawesome/brands/github
      link: https://github.com/deepaucksharma
    - icon: fontawesome/brands/twitter
      link: https://twitter.com/deepaucksharma
    - icon: fontawesome/brands/linkedin
      link: https://linkedin.com/in/deepaucksharma
  
  # Build date for copyright
  build_date: "2025"
  
  # Version control
  version:
    provider: mike
    default: stable
    
  # Analytics (optional) - using correct !ENV syntax with fallback
  analytics:
    provider: google
    property: !ENV [GOOGLE_ANALYTICS_KEY, '']
    feedback:
      title: Was this page helpful?
      ratings:
        - icon: material/emoticon-happy-outline
          name: This page was helpful
          data: 1
          note: Thanks for your feedback!
        - icon: material/emoticon-sad-outline
          name: This page could be improved
          data: 0
          note: Thanks! Let us know how we can improve.
    
  # MathJax configuration
  mathjax:
    loader: 
      load: ['[tex]/boldsymbol', '[tex]/physics', '[tex]/mathtools']
    tex:
      inlineMath: [['$', '$'], ['\\(', '\\)']]
      displayMath: [['$$', '$$'], ['\\[', '\\]']]
  
  # Consent for GDPR
  consent:
    title: Cookie consent
    description: >- 
      We use cookies to recognize your repeated visits and preferences, as well
      as to measure the effectiveness of our documentation and whether users
      find what they're searching for. With your consent, you're helping us to
      make our documentation better.
    cookies:
      analytics:
        name: Google Analytics
        checked: true
    actions:
      - accept
      - reject
      - manage

# Validation
validation:
  nav:
    omitted_files: info
    not_found: warn
    absolute_links: info
  links:
    not_found: ignore
    absolute_links: ignore
    unrecognized_links: info

# Build Configuration
use_directory_urls: true
strict: false

# Watch - Development
watch:
  - docs
  - mkdocs.yml

# Navigation - Optimized 6-Tab Structure with Proper Depth
nav:
  - Home: index.md
  
  - Learn:
    - Welcome: introduction/index.md
    - Getting Started: introduction/getting-started.md
    - Philosophy: introduction/philosophy.md
    - Learning Paths:
      - Overview: learning-paths/index.md
      - New Graduate: learning-paths/new-graduate.md
      - Senior Engineer: learning-paths/senior-engineer.md
      - Engineering Manager: learning-paths/manager.md
      - Solution Architect: learning-paths/architect.md
      - By Topic:
        - Consistency: learning-paths/consistency.md
        - Performance: learning-paths/performance.md
        - Cost: learning-paths/cost.md
        - Reliability: learning-paths/reliability.md
    - Foundations:
      - The 7 Laws: part1-axioms/index.md
      - The 5 Pillars: part2-pillars/index.md
  
  - Patterns:
    - Overview: patterns/index.md
    - Pattern Tools:
      - Pattern Selector: patterns/pattern-selector.md
      - Pattern Comparison: patterns/pattern-comparison.md
      - Pattern Quiz: patterns/pattern-quiz.md
    - Core Patterns:
      - Circuit Breaker: patterns/circuit-breaker.md
      - Retry & Backoff: patterns/retry-backoff.md
      - CQRS: patterns/cqrs.md
      - Event Sourcing: patterns/event-sourcing.md
      - Saga: patterns/saga.md
      - Service Mesh: patterns/service-mesh.md
    - Browse All Patterns: patterns/index.md#pattern-categories
  
  - Quantitative:
    - Overview: quantitative/index.md
    - Essential Tools:
      - Latency Ladder: quantitative/latency-ladder.md
      - Little's Law: quantitative/littles-law.md
      - CAP Theorem: quantitative/cap-theorem.md
      - Consistency Models: quantitative/consistency-models.md
    - Calculators:
      - All Calculators: tools/index.md
      - Latency Calculator: tools/latency-calculator.md
      - Capacity Calculator: tools/capacity-calculator.md
    - Human Factors:
      - Overview: human-factors/index.md
      - SRE Practices: human-factors/sre-practices.md
      - Chaos Engineering: human-factors/chaos-engineering.md
  
  - Case Studies:
    - Overview: case-studies/index.md
    - Featured Systems:
      - Chat System: case-studies/chat-system.md
      - URL Shortener: case-studies/url-shortener.md
      - Key-Value Store: case-studies/key-value-store.md
    - Tech Giants:
      - Amazon DynamoDB: case-studies/amazon-dynamo.md
      - Apache Cassandra: case-studies/cassandra.md
      - Netflix Streaming: case-studies/netflix-streaming.md
    - Browse All Cases: case-studies/index.md#all-case-studies
  
  - Interviews:
    - Overview: google-interviews/index.md
    - Preparation:
      - Preparation Guide: google-interviews/preparation-guide.md
      - Visual Roadmap: google-interviews/preparation-roadmap.md
      - Common Mistakes: google-interviews/common-mistakes.md
    - Practice Problems:
      - System Design Basics: google-interviews/system-design-basics.md
      - Advanced Topics: google-interviews/advanced-techniques.md
  
  - Reference:
    - Overview: reference/index.md
    - Quick Reference:
      - Glossary: reference/glossary.md
      - Cheat Sheets: reference/cheat-sheets.md
      - Law Mapping Guide: reference/law-mapping-guide.md
    - Resources:
      - Security Patterns: reference/security.md
      - Recipe Cards: reference/recipe-cards.md