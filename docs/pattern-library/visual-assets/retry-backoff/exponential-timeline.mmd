%%{init: {
  'theme': 'base',
  'themeVariables': {
    'primaryColor': '#5448C8',
    'primaryTextColor': '#333',
    'primaryBorderColor': '#3f33a6',
    'lineColor': '#64748b',
    'background': '#f8fafc'
  }
}}%%

graph TB
    subgraph "Exponential Backoff Timeline Comparison"
        subgraph "Standard Exponential Backoff"
            T0["â±ï¸ 0s: Initial Request<br/>âŒ Failed"]
            T1["â±ï¸ 1s: Retry 1<br/>âŒ Failed<br/>(waited 1s)"]
            T2["â±ï¸ 3s: Retry 2<br/>âŒ Failed<br/>(waited 2s)"]
            T3["â±ï¸ 7s: Retry 3<br/>âœ… Success!<br/>(waited 4s)"]
            
            T0 -.->|"ğŸ• 1s delay"| T1
            T1 -.->|"ğŸ•‘ 2s delay"| T2
            T2 -.->|"ğŸ•“ 4s delay"| T3
        end
        
        subgraph "With Jitter (Â±25%)" 
            J0["â±ï¸ 0s: Request âŒ"]
            J1["â±ï¸ 0.8s: Retry âŒ<br/>(1s - 20%)"]
            J2["â±ï¸ 3.2s: Retry âŒ<br/>(2s + 20%)"]
            J3["â±ï¸ 6.5s: Retry âœ…<br/>(4s - 18%)"]
            
            J0 -.->|"ğŸ² 0.8s"| J1
            J1 -.->|"ğŸ² 2.4s"| J2
            J2 -.->|"ğŸ² 3.3s"| J3
        end
        
        subgraph "Decorrelated Jitter (AWS)"
            D0["â±ï¸ 0s: Request âŒ"]
            D1["â±ï¸ 0.5s: Retry âŒ<br/>(random 0-1s)"]
            D2["â±ï¸ 2.1s: Retry âŒ<br/>(random 0-3s)"]
            D3["â±ï¸ 5.7s: Retry âœ…<br/>(random 0-7s)"]
            
            D0 -.->|"ğŸ² 0.5s"| D1
            D1 -.->|"ğŸ² 1.6s"| D2
            D2 -.->|"ğŸ² 3.6s"| D3
        end
    end
    
    style T3 fill:#4ade80,stroke:#16a34a
    style J3 fill:#4ade80,stroke:#16a34a
    style D3 fill:#4ade80,stroke:#16a34a