/* Mobile Responsive Improvements */

/* ===================================
   1. Base Mobile Adjustments
   =================================== */
@media screen and (max-width: 768px) {
  /* Fix content padding */
  .md-content__inner {
    padding: 0 1rem;
    max-width: 100vw;
    overflow-x: hidden;
  }
  
  /* Prevent horizontal scroll on main */
  .md-main {
    overflow-x: hidden;
  }
  
  /* Fix header height */
  .md-header {
    height: 48px; /* Reduced from 56px */
  }
  
  /* Navigation adjustments */
  .md-nav__item {
    font-size: 0.875rem;
  }
}

/* ===================================
   2. Cards and Grid Layouts
   =================================== */
@media screen and (max-width: 768px) {
  /* Fix grid cards overflow */
  .grid.cards {
    grid-template-columns: 1fr;
    gap: 1rem;
    padding: 0;
  }
  
  .grid.cards > * {
    margin: 0;
  }
  
  /* Concept cards */
  .concept-cards {
    grid-template-columns: 1fr;
    gap: 1rem;
  }
  
  .concept-card {
    min-width: unset;
    width: 100%;
  }
  
  /* Journey cards */
  .journey-card {
    width: 100%;
    margin: 0.5rem 0;
  }
  
  /* Failure vignettes */
  .failure-vignette {
    padding: 1.5rem;
    margin: 1rem -1rem;
    border-radius: 0;
  }
  
  /* Axiom boxes */
  .axiom-box {
    padding: 1.5rem;
    margin: 1rem -1rem;
    border-radius: 0;
  }
  
  /* Decision boxes */
  .decision-box {
    padding: 1.5rem;
    margin: 1rem -1rem;
    border-radius: 0;
  }
}

/* ===================================
   3. Tables and Code Blocks
   =================================== */
@media screen and (max-width: 768px) {
  /* Make tables scrollable */
  .md-typeset table {
    display: block;
    overflow-x: auto;
    white-space: nowrap;
    -webkit-overflow-scrolling: touch;
    margin: 0 -1rem;
    padding: 0 1rem;
  }
  
  /* Code blocks */
  pre {
    overflow-x: auto;
    margin: 1rem -1rem;
    padding: 1rem;
    border-radius: 0;
  }
  
  /* Inline code */
  code {
    word-break: break-word;
  }
  
  /* Mermaid diagrams */
  .mermaid {
    overflow-x: auto;
    max-width: 100vw;
    margin: 0 -1rem;
    padding: 1rem;
  }
  
  .mermaid svg {
    max-width: none;
    height: auto;
  }
}

/* ===================================
   4. Hero Section
   =================================== */
@media screen and (max-width: 768px) {
  .hero-container {
    min-height: auto;
    height: auto;
    padding: 2rem 1rem;
  }
  
  .hero-content {
    padding: 0;
    max-width: 100%;
  }
  
  .hero-title {
    font-size: 2rem;
    line-height: 1.2;
  }
  
  .hero-subtitle {
    font-size: 1rem;
  }
  
  .hero-stats {
    flex-direction: column;
    gap: 1rem;
  }
  
  .stat-item {
    padding: 1rem;
    width: 100%;
  }
  
  .hero-cta {
    flex-direction: column;
    gap: 1rem;
  }
  
  .hero-button {
    width: 100%;
    text-align: center;
  }
  
  /* Hide canvas animation on mobile */
  .hero-animation {
    display: none;
  }
}

/* ===================================
   5. Journey Map
   =================================== */
@media screen and (max-width: 768px) {
  #journey-map-container {
    padding: 1rem;
    margin: 1rem -1rem;
    border-radius: 0;
  }
  
  .journey-legend {
    font-size: 0.75rem;
    gap: 0.5rem;
  }
  
  .journey-controls {
    position: static;
    margin-bottom: 1rem;
    justify-content: center;
  }
  
  #journey-map {
    height: 300px;
    touch-action: pan-x pan-y;
  }
  
  .journey-details {
    padding: 1rem;
  }
}

/* ===================================
   6. Progressive Disclosure
   =================================== */
@media screen and (max-width: 768px) {
  .progressive-disclosure {
    margin: 1rem -1rem;
    border-radius: 0;
  }
  
  .disclosure-header {
    padding: 1rem;
  }
  
  .disclosure-title {
    font-size: 0.875rem;
  }
  
  .disclosure-content {
    padding: 0 1rem 1rem;
  }
}

/* ===================================
   7. Navigation Improvements
   =================================== */
@media screen and (max-width: 768px) {
  /* Side navigation */
  .md-nav__title {
    font-size: 0.875rem;
  }
  
  .md-nav__link {
    font-size: 0.875rem;
    padding: 0.5rem 1rem;
  }
  
  /* Tab navigation */
  .md-tabs__item {
    font-size: 0.875rem;
    padding: 0 0.75rem;
  }
  
  /* Hide breadcrumbs on very small screens */
  @media screen and (max-width: 480px) {
    .md-breadcrumb {
      display: none;
    }
  }
}

/* ===================================
   8. Forms and Interactive Elements
   =================================== */
@media screen and (max-width: 768px) {
  /* Buttons */
  .md-button {
    padding: 0.5rem 1rem;
    font-size: 0.875rem;
  }
  
  /* Input fields */
  input[type="text"],
  input[type="number"],
  select {
    width: 100%;
    font-size: 16px; /* Prevent zoom on iOS */
  }
  
  /* Tool containers */
  .tool-container {
    padding: 1.5rem 1rem;
    margin: 1rem -1rem;
    border-radius: 0;
  }
}

/* ===================================
   9. Overflow Prevention
   =================================== */
@media screen and (max-width: 768px) {
  /* Prevent any element from causing horizontal scroll */
  * {
    max-width: 100vw;
  }
  
  /* Specific overflow fixes */
  .latency-ladder,
  .matrix-table,
  .matrix-box,
  .data-store-matrix,
  .transformation-matrix,
  .polyglot-architecture,
  .tradeoff-examples,
  .takeaway-grid {
    overflow-x: auto;
    -webkit-overflow-scrolling: touch;
    margin: 0 -1rem;
    padding: 0 1rem;
  }
  
  /* Add scroll hint for wide content */
  .latency-ladder::after,
  .matrix-table::after {
    content: "← Scroll →";
    display: block;
    text-align: center;
    color: var(--ds-text-secondary);
    font-size: 0.75rem;
    margin-top: 0.5rem;
  }
}

/* ===================================
   10. Touch-Friendly Adjustments
   =================================== */
@media (hover: none) and (pointer: coarse) {
  /* Increase touch targets */
  a,
  button,
  .node,
  .journey-control-btn {
    min-height: 44px;
    min-width: 44px;
  }
  
  /* Remove hover effects */
  .concept-card:hover,
  .journey-card:hover,
  .node:hover {
    transform: none;
  }
  
  /* Improve tap feedback */
  a:active,
  button:active {
    opacity: 0.8;
  }
}

/* ===================================
   11. Landscape Mobile
   =================================== */
@media screen and (max-width: 768px) and (orientation: landscape) {
  .hero-container {
    min-height: auto;
  }
  
  .md-header {
    height: 48px;
  }
  
  #journey-map {
    height: 250px;
  }
}

/* ===================================
   12. Print Styles
   =================================== */
@media print {
  .hero-animation,
  .journey-controls,
  .md-header,
  .md-sidebar,
  .md-footer,
  .reading-progress,
  .scroll-hint {
    display: none !important;
  }
  
  .hero-container {
    page-break-inside: avoid;
  }
  
  .axiom-box,
  .failure-vignette,
  .decision-box {
    page-break-inside: avoid;
  }
}