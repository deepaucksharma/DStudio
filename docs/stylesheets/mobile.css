/* ===================================
   Consolidated Mobile Styles
   Combines all mobile-specific styles for better maintainability
   =================================== */

/* ===================================
   Mobile Base Styles
   =================================== */
@media (max-width: 768px) {
  /* Reset and Base */
  body {
    -webkit-text-size-adjust: 100%;
    -webkit-tap-highlight-color: transparent;
    touch-action: manipulation;
    font-size: 16px; /* Prevent zoom on iOS */
  }

  /* Prevent horizontal scroll */
  html, body {
    overflow-x: hidden;
    max-width: 100vw;
  }

  /* Touch-friendly spacing */
  .md-content {
    padding: 1rem;
  }

  /* ===================================
     Mobile Navigation
     =================================== */
  .md-header {
    height: 3rem;
    position: fixed;
    top: 0;
    width: 100%;
    z-index: 1000;
  }

  .md-header__inner {
    padding: 0 1rem;
  }

  /* Hamburger menu */
  .md-header__button {
    width: 3rem;
    height: 3rem;
    display: flex;
    align-items: center;
    justify-content: center;
  }

  /* Mobile drawer */
  .md-nav--primary {
    position: fixed;
    top: 3rem;
    left: 0;
    width: 80%;
    max-width: 320px;
    height: calc(100vh - 3rem);
    background: var(--ds-bg-primary);
    transform: translateX(-100%);
    transition: none;
    overflow-y: auto;
    -webkit-overflow-scrolling: touch;
    z-index: 999;
  }

  .md-nav--primary.md-nav--open {
    transform: translateX(0);
  }

  /* Overlay */
  .md-overlay {
    position: fixed;
    top: 3rem;
    left: 0;
    width: 100vw;
    height: calc(100vh - 3rem);
    background: rgba(0, 0, 0, 0.5);
    opacity: 0;
    pointer-events: none;
    z-index: 998;
  }

  .md-overlay--active {
    opacity: 1;
    pointer-events: auto;
  }

  /* Navigation items */
  .md-nav__item {
    padding: 0;
    border-bottom: 1px solid var(--ds-border-color);
  }

  .md-nav__link {
    padding: 1rem;
    min-height: 48px;
    display: flex;
    align-items: center;
  }

  /* ===================================
     Mobile Typography
     =================================== */
  h1 { font-size: 1.75rem; }
  h2 { font-size: 1.5rem; }
  h3 { font-size: 1.25rem; }
  h4 { font-size: 1.125rem; }
  h5, h6 { font-size: 1rem; }

  /* Code blocks */
  pre {
    overflow-x: auto;
    -webkit-overflow-scrolling: touch;
    max-width: 100vw;
    margin-left: -1rem;
    margin-right: -1rem;
    padding-left: 1rem;
    padding-right: 1rem;
  }

  /* Tables */
  .md-typeset table {
    display: block;
    overflow-x: auto;
    -webkit-overflow-scrolling: touch;
    max-width: 100vw;
    margin-left: -1rem;
    margin-right: -1rem;
  }

  /* ===================================
     Mobile Components
     =================================== */
  
  /* Cards */
  .grid.cards {
    grid-template-columns: 1fr;
    gap: 1rem;
  }

  /* Buttons */
  .md-button {
    width: 100%;
    padding: 1rem;
    min-height: 48px;
  }

  /* Forms */
  input[type="text"],
  input[type="number"],
  select,
  textarea {
    font-size: 16px; /* Prevent zoom */
    min-height: 48px;
    padding: 0.75rem;
  }

  /* Admonitions */
  .admonition {
    margin-left: -1rem;
    margin-right: -1rem;
    border-radius: 0;
    border-left: none;
    border-right: none;
  }

  /* ===================================
     Mobile Performance
     =================================== */
  
  /* Disable animations on mobile */
  * {
    animation: none !important;
    transition: none !important;
  }

  /* Hide non-essential elements */
  .md-sidebar--secondary {
    display: none;
  }

  /* Optimize images */
  img {
    max-width: 100%;
    height: auto;
  }

  /* ===================================
     Touch Optimizations
     =================================== */
  
  /* Touch-friendly tap targets */
  a, button, input, select, textarea, .clickable {
    min-height: 44px;
    min-width: 44px;
  }

  /* Improved touch scrolling */
  .scrollable {
    -webkit-overflow-scrolling: touch;
    overflow-y: auto;
  }

  /* Disable hover effects */
  @media (hover: none) {
    a:hover,
    button:hover,
    .md-nav__link:hover {
      background: none;
      color: inherit;
    }
  }

  /* ===================================
     Mobile-Specific Components
     =================================== */
  
  /* Journey Map */
  #journey-map-container {
    padding: 1rem;
    margin: 1rem -1rem;
  }

  #journey-map {
    height: 300px;
  }

  /* Reading Progress */
  .reading-progress {
    height: 3px;
    top: 3rem;
  }

  .reading-progress-info {
    display: none;
  }

  /* Tools */
  .tool-container {
    padding: 1rem;
    margin: 1rem -1rem;
  }

  .tool-grid {
    grid-template-columns: 1fr;
  }

  /* Hero Section */
  .hero-container {
    min-height: 200px;
    max-height: 250px;
    margin: 1rem -1rem;
  }

  .hero-title {
    font-size: 1.5rem;
  }

  .hero-subtitle {
    font-size: 1rem;
  }

  /* Footer */
  .md-footer {
    padding: 1rem;
  }

  .md-footer__inner {
    flex-direction: column;
    gap: 1rem;
  }
}

/* ===================================
   Landscape Mobile
   =================================== */
@media (max-width: 768px) and (orientation: landscape) {
  .md-header {
    height: 2.5rem;
  }

  .md-nav--primary {
    top: 2.5rem;
    height: calc(100vh - 2.5rem);
  }

  .hero-container {
    min-height: 150px;
    max-height: 200px;
  }
}

/* ===================================
   Small Mobile Devices
   =================================== */
@media (max-width: 375px) {
  .md-content {
    padding: 0.75rem;
  }

  h1 { font-size: 1.5rem; }
  h2 { font-size: 1.25rem; }
  h3 { font-size: 1.125rem; }

  .md-button {
    padding: 0.75rem;
    font-size: 0.875rem;
  }
}

/* ===================================
   Print Styles
   =================================== */
@media print {
  .md-header,
  .md-sidebar,
  .md-footer,
  .reading-progress,
  .journey-controls,
  .tool-container {
    display: none !important;
  }

  .md-content {
    padding: 0;
    margin: 0;
    max-width: 100%;
  }
}