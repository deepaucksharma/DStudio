
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Design a scalable system to discover, fetch, and index web content while respecting robots.txt and rate limits">
      
      
      
        <link rel="canonical" href="https://deepaucksharma.github.io/DStudio/case-studies/web-crawler/">
      
      
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.15">
    
    
      
        <title>Distributed Web Crawler - The Compendium of Distributed Systems</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.342714a4.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Inter:300,300i,400,400i,700,700i%7CJetBrains+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Inter";--md-code-font:"JetBrains Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../stylesheets/extra.css">
    
      <link rel="stylesheet" href="../../stylesheets/modular.css">
    
      <link rel="stylesheet" href="../../stylesheets/axioms.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#distributed-web-crawler" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="The Compendium of Distributed Systems" class="md-header__button md-logo" aria-label="The Compendium of Distributed Systems" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            The Compendium of Distributed Systems
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Distributed Web Crawler
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme)" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m14.3 16-.7-2h-3.2l-.7 2H7.8L11 7h2l3.2 9zM20 8.69V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12zm-9.15 3.96h2.3L12 9z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="cyan"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_2" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 7a5 5 0 0 1 5 5 5 5 0 0 1-5 5 5 5 0 0 1-5-5 5 5 0 0 1 5-5m0 2a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3m0-7 2.39 3.42C13.65 5.15 12.84 5 12 5s-1.65.15-2.39.42zM3.34 7l4.16-.35A7.2 7.2 0 0 0 5.94 8.5c-.44.74-.69 1.5-.83 2.29zm.02 10 1.76-3.77a7.131 7.131 0 0 0 2.38 4.14zM20.65 7l-1.77 3.79a7.02 7.02 0 0 0-2.38-4.15zm-.01 10-4.14.36c.59-.51 1.12-1.14 1.54-1.86.42-.73.69-1.5.83-2.29zM12 22l-2.41-3.44c.74.27 1.55.44 2.41.44.82 0 1.63-.17 2.37-.44z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="indigo" data-md-color-accent="cyan"  aria-label="Switch to auto"  type="radio" name="__palette" id="__palette_2">
    
      <label class="md-header__button md-icon" title="Switch to auto" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m17.75 4.09-2.53 1.94.91 3.06-2.63-1.81-2.63 1.81.91-3.06-2.53-1.94L12.44 4l1.06-3 1.06 3zm3.5 6.91-1.64 1.25.59 1.98-1.7-1.17-1.7 1.17.59-1.98L15.75 11l2.06-.05L18.5 9l.69 1.95zm-2.28 4.95c.83-.08 1.72 1.1 1.19 1.85-.32.45-.66.87-1.08 1.27C15.17 23 8.84 23 4.94 19.07c-3.91-3.9-3.91-10.24 0-14.14.4-.4.82-.76 1.27-1.08.75-.53 1.93.36 1.85 1.19-.27 2.86.69 5.83 2.89 8.02a9.96 9.96 0 0 0 8.02 2.89m-1.64 2.02a12.08 12.08 0 0 1-7.8-3.47c-2.17-2.19-3.33-5-3.49-7.82-2.81 3.14-2.7 7.96.31 10.98 3.02 3.01 7.84 3.12 10.98.31"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
          <a href="javascript:void(0)" class="md-search__icon md-icon" title="Share" aria-label="Share" data-clipboard data-clipboard-text="" data-md-component="search-share" tabindex="-1">
            
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91s2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08"/></svg>
          </a>
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/deepaucksharma/DStudio" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    deepaucksharma/DStudio
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../introduction/" class="md-tabs__link">
          
  
  
    
  
  Home

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../axioms/" class="md-tabs__link">
          
  
  
    
  
  Foundations

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../patterns/" class="md-tabs__link">
          
  
  
    
  
  Essential Patterns

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../quantitative/" class="md-tabs__link">
          
  
  
    
  
  📊 Quantitative Toolkit

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../human-factors/" class="md-tabs__link">
          
  
  
    
  
  👥 Human Factors

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../tools/" class="md-tabs__link">
          
  
  
    
  
  🛠️ Tools

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../capstone/framework/" class="md-tabs__link">
          
  
  
    
  
  🎯 Capstone

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../" class="md-tabs__link">
          
  
  
    
  
  📚 Case Studies

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../reference/" class="md-tabs__link">
          
  
  
    
  
  📖 Reference

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


  

<nav class="md-nav md-nav--primary md-nav--lifted md-nav--integrated" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="The Compendium of Distributed Systems" class="md-nav__button md-logo" aria-label="The Compendium of Distributed Systems" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    The Compendium of Distributed Systems
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/deepaucksharma/DStudio" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    deepaucksharma/DStudio
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_1" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../introduction/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Home
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_1" id="__nav_1_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1">
            <span class="md-nav__icon md-icon"></span>
            Home
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../introduction/philosophy/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Philosophy
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../learning-paths/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Learning Paths
    
  </span>
  
    
  
  
    <span class="md-status md-status--complete"></span>
  

  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_2" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../axioms/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Foundations
    
  </span>
  
    
  
  
    <span class="md-status md-status--complete"></span>
  

  

            </a>
            
              
              <label class="md-nav__link " for="__nav_2" id="__nav_2_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Foundations
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../pillars/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    The 5 Pillars
    
  </span>
  
    
  
  
    <span class="md-status md-status--complete"></span>
  

  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_2_3" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../part1-axioms/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Laws (Detailed)
    
  </span>
  
    
  
  
    <span class="md-status md-status--complete"></span>
  

  

            </a>
            
              
              <label class="md-nav__link " for="__nav_2_3" id="__nav_2_3_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_3">
            <span class="md-nav__icon md-icon"></span>
            Laws (Detailed)
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part1-axioms/axiom1-failure/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Law 1: Correlated Failure ⛓️
    
  </span>
  
    
  
  
    <span class="md-status md-status--complete"></span>
  

  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part1-axioms/axiom2-asynchrony/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Law 2: Asynchronous Reality ⏳
    
  </span>
  
    
  
  
    <span class="md-status md-status--complete"></span>
  

  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part1-axioms/axiom3-emergence/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Law 3: Emergent Chaos 🌪️
    
  </span>
  
    
  
  
    <span class="md-status md-status--complete"></span>
  

  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part1-axioms/axiom4-tradeoffs/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Law 4: Multidimensional Optimization ⚖️
    
  </span>
  
    
  
  
    <span class="md-status md-status--complete"></span>
  

  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part1-axioms/axiom5-epistemology/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Law 5: Distributed Knowledge 🧠
    
  </span>
  
    
  
  
    <span class="md-status md-status--complete"></span>
  

  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part1-axioms/axiom6-human-api/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Law 6: Cognitive Load 🤯
    
  </span>
  
    
  
  
    <span class="md-status md-status--complete"></span>
  

  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part1-axioms/axiom7-economics/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Law 7: Economic Reality 💰
    
  </span>
  
    
  
  
    <span class="md-status md-status--complete"></span>
  

  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part1-axioms/synthesis/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Synthesis
    
  </span>
  
    
  
  
    <span class="md-status md-status--complete"></span>
  

  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part1-axioms/quiz/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Quiz
    
  </span>
  
    
  
  
    <span class="md-status md-status--complete"></span>
  

  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_2_4" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../part2-pillars/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Pillars (Detailed)
    
  </span>
  
    
  
  
    <span class="md-status md-status--complete"></span>
  

  

            </a>
            
              
              <label class="md-nav__link " for="__nav_2_4" id="__nav_2_4_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_4">
            <span class="md-nav__icon md-icon"></span>
            Pillars (Detailed)
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part2-pillars/work/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Work Distribution
    
  </span>
  
    
  
  
    <span class="md-status md-status--complete"></span>
  

  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part2-pillars/state/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    State Distribution
    
  </span>
  
    
  
  
    <span class="md-status md-status--complete"></span>
  

  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part2-pillars/truth/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Truth Distribution
    
  </span>
  
    
  
  
    <span class="md-status md-status--complete"></span>
  

  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part2-pillars/control/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Control Distribution
    
  </span>
  
    
  
  
    <span class="md-status md-status--complete"></span>
  

  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../part2-pillars/intelligence/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Intelligence Distribution
    
  </span>
  
    
  
  
    <span class="md-status md-status--complete"></span>
  

  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_3" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../patterns/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Essential Patterns
    
  </span>
  
    
  
  
    <span class="md-status md-status--complete"></span>
  

  

            </a>
            
              
              <label class="md-nav__link " for="__nav_3" id="__nav_3_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Essential Patterns
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../patterns/pattern-selector/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    🔍 Find Your Pattern
    
  </span>
  
    
  
  
    <span class="md-status md-status--partial"></span>
  

  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../patterns/pattern-comparison/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ⚖️ Compare Patterns
    
  </span>
  
    
  
  
    <span class="md-status md-status--partial"></span>
  

  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_3_4" >
        
          
          <label class="md-nav__link" for="__nav_3_4" id="__nav_3_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Reliability (Essential)
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_4">
            <span class="md-nav__icon md-icon"></span>
            Reliability (Essential)
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../patterns/circuit-breaker/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Circuit Breaker
    
  </span>
  
    
  
  
    <span class="md-status md-status--complete"></span>
  

  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../patterns/retry-backoff/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Retry & Backoff
    
  </span>
  
    
  
  
    <span class="md-status md-status--complete"></span>
  

  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../patterns/bulkhead/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Bulkhead
    
  </span>
  
    
  
  
    <span class="md-status md-status--complete"></span>
  

  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../patterns/timeout/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Timeout
    
  </span>
  
    
  
  
    <span class="md-status md-status--complete"></span>
  

  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../patterns/health-check/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Health Check
    
  </span>
  
    
  
  
    <span class="md-status md-status--complete"></span>
  

  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../patterns/graceful-degradation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Graceful Degradation
    
  </span>
  
    
  
  
    <span class="md-status md-status--complete"></span>
  

  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../patterns/backpressure/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Backpressure
    
  </span>
  
    
  
  
    <span class="md-status md-status--complete"></span>
  

  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../patterns/rate-limiting/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Rate Limiting
    
  </span>
  
    
  
  
    <span class="md-status md-status--complete"></span>
  

  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_3_5" >
        
          
          <label class="md-nav__link" for="__nav_3_5" id="__nav_3_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Performance (Essential)
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_5">
            <span class="md-nav__icon md-icon"></span>
            Performance (Essential)
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../patterns/caching-strategies/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Caching Strategies
    
  </span>
  
    
  
  
    <span class="md-status md-status--complete"></span>
  

  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../patterns/sharding/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Sharding
    
  </span>
  
    
  
  
    <span class="md-status md-status--complete"></span>
  

  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../patterns/load-balancing/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Load Balancing
    
  </span>
  
    
  
  
    <span class="md-status md-status--complete"></span>
  

  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../patterns/auto-scaling/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Auto-Scaling
    
  </span>
  
    
  
  
    <span class="md-status md-status--complete"></span>
  

  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../patterns/api-gateway/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    API Gateway
    
  </span>
  
    
  
  
    <span class="md-status md-status--complete"></span>
  

  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_3_6" >
        
          
          <label class="md-nav__link" for="__nav_3_6" id="__nav_3_6_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Consistency (Essential)
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_6">
            <span class="md-nav__icon md-icon"></span>
            Consistency (Essential)
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../patterns/event-sourcing/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Event Sourcing
    
  </span>
  
    
  
  
    <span class="md-status md-status--complete"></span>
  

  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../patterns/cqrs/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    CQRS
    
  </span>
  
    
  
  
    <span class="md-status md-status--complete"></span>
  

  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../patterns/saga/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Saga
    
  </span>
  
    
  
  
    <span class="md-status md-status--complete"></span>
  

  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../patterns/outbox/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Outbox
    
  </span>
  
    
  
  
    <span class="md-status md-status--complete"></span>
  

  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../patterns/two-phase-commit/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Two-Phase Commit
    
  </span>
  
    
  
  
    <span class="md-status md-status--complete"></span>
  

  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../patterns/consensus/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Consensus
    
  </span>
  
    
  
  
    <span class="md-status md-status--complete"></span>
  

  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_3_7" >
        
          
          <label class="md-nav__link" for="__nav_3_7" id="__nav_3_7_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Modern Architecture (Essential)
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_7">
            <span class="md-nav__icon md-icon"></span>
            Modern Architecture (Essential)
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../patterns/service-mesh/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Service Mesh
    
  </span>
  
    
  
  
    <span class="md-status md-status--complete"></span>
  

  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../patterns/serverless-faas/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Serverless/FaaS
    
  </span>
  
    
  
  
    <span class="md-status md-status--complete"></span>
  

  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../patterns/event-driven/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Event-Driven
    
  </span>
  
    
  
  
    <span class="md-status md-status--complete"></span>
  

  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../patterns/leader-election/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Leader Election
    
  </span>
  
    
  
  
    <span class="md-status md-status--complete"></span>
  

  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../patterns/distributed-lock/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Distributed Lock
    
  </span>
  
    
  
  
    <span class="md-status md-status--complete"></span>
  

  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../patterns/observability/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Observability
    
  </span>
  
    
  
  
    <span class="md-status md-status--complete"></span>
  

  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_4" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../quantitative/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    📊 Quantitative Toolkit
    
  </span>
  
    
  
  
    <span class="md-status md-status--complete"></span>
  

  

            </a>
            
              
              <label class="md-nav__link " for="__nav_4" id="__nav_4_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            📊 Quantitative Toolkit
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_4_2" >
        
          
          <label class="md-nav__link" for="__nav_4_2" id="__nav_4_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Essential Quantitative Tools
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_2">
            <span class="md-nav__icon md-icon"></span>
            Essential Quantitative Tools
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../quantitative/latency-ladder/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Latency Ladder
    
  </span>
  
    
  
  
    <span class="md-status md-status--complete"></span>
  

  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../quantitative/littles-law/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Little's Law
    
  </span>
  
    
  
  
    <span class="md-status md-status--complete"></span>
  

  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../quantitative/cap-theorem/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    CAP Theorem
    
  </span>
  
    
  
  
    <span class="md-status md-status--stub"></span>
  

  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../quantitative/consistency-models/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Consistency Models
    
  </span>
  
    
  
  
    <span class="md-status md-status--stub"></span>
  

  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../quantitative/universal-scalability/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Universal Scalability Law
    
  </span>
  
    
  
  
    <span class="md-status md-status--complete"></span>
  

  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../quantitative/queueing-models/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Queueing Theory
    
  </span>
  
    
  
  
    <span class="md-status md-status--complete"></span>
  

  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../quantitative/availability-math/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Availability Math
    
  </span>
  
    
  
  
    <span class="md-status md-status--complete"></span>
  

  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../quantitative/capacity-planning/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Capacity Planning
    
  </span>
  
    
  
  
    <span class="md-status md-status--complete"></span>
  

  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../quantitative/problem-set/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Problem Set
    
  </span>
  
    
  
  
    <span class="md-status md-status--complete"></span>
  

  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_5" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../human-factors/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    👥 Human Factors
    
  </span>
  
    
  
  
    <span class="md-status md-status--complete"></span>
  

  

            </a>
            
              
              <label class="md-nav__link " for="__nav_5" id="__nav_5_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            👥 Human Factors
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_5_2" >
        
          
          <label class="md-nav__link" for="__nav_5_2" id="__nav_5_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Essential Practices
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_2">
            <span class="md-nav__icon md-icon"></span>
            Essential Practices
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../human-factors/sre-practices/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    SRE Practices
    
  </span>
  
    
  
  
    <span class="md-status md-status--complete"></span>
  

  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../human-factors/chaos-engineering/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Chaos Engineering
    
  </span>
  
    
  
  
    <span class="md-status md-status--complete"></span>
  

  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../human-factors/observability-stacks/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Observability Stacks
    
  </span>
  
    
  
  
    <span class="md-status md-status--complete"></span>
  

  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../human-factors/team-topologies/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Team Topologies
    
  </span>
  
    
  
  
    <span class="md-status md-status--complete"></span>
  

  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../human-factors/incident-response/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Incident Response
    
  </span>
  
    
  
  
    <span class="md-status md-status--complete"></span>
  

  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../human-factors/blameless-postmortems/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Blameless Postmortems
    
  </span>
  
    
  
  
    <span class="md-status md-status--complete"></span>
  

  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_6" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../tools/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    🛠️ Tools
    
  </span>
  
    
  
  
    <span class="md-status md-status--complete"></span>
  

  

            </a>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            🛠️ Tools
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_7" >
        
          
          <label class="md-nav__link" for="__nav_7" id="__nav_7_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    🎯 Capstone
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7">
            <span class="md-nav__icon md-icon"></span>
            🎯 Capstone
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../capstone/framework/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Project Framework
    
  </span>
  
    
  
  
    <span class="md-status md-status--complete"></span>
  

  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../capstone/evaluation-rubric/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Evaluation Rubric
    
  </span>
  
    
  
  
    <span class="md-status md-status--complete"></span>
  

  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_8" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    📚 Case Studies
    
  </span>
  
    
  
  
    <span class="md-status md-status--complete"></span>
  

  

            </a>
            
              
              <label class="md-nav__link " for="__nav_8" id="__nav_8_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_8">
            <span class="md-nav__icon md-icon"></span>
            📚 Case Studies
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_8_2" >
        
          
          <label class="md-nav__link" for="__nav_8_2" id="__nav_8_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Essential Case Studies
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_8_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_8_2">
            <span class="md-nav__icon md-icon"></span>
            Essential Case Studies
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../amazon-dynamo/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Amazon DynamoDB
    
  </span>
  
    
  
  
    <span class="md-status md-status--complete"></span>
  

  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../chat-system/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Chat System
    
  </span>
  
    
  
  
    <span class="md-status md-status--complete"></span>
  

  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../consistent-hashing/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Consistent Hashing
    
  </span>
  
    
  
  
    <span class="md-status md-status--complete"></span>
  

  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../paypal-payments/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    PayPal Payments
    
  </span>
  
    
  
  
    <span class="md-status md-status--complete"></span>
  

  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../spotify-recommendations/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Spotify Recommendations
    
  </span>
  
    
  
  
    <span class="md-status md-status--complete"></span>
  

  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../uber-location/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Uber Location Services
    
  </span>
  
    
  
  
    <span class="md-status md-status--complete"></span>
  

  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../key-value-store/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Key-Value Store
    
  </span>
  
    
  
  
    <span class="md-status md-status--complete"></span>
  

  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../payment-system/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Payment System
    
  </span>
  
    
  
  
    <span class="md-status md-status--complete"></span>
  

  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../url-shortener/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    URL Shortener
    
  </span>
  
    
  
  
    <span class="md-status md-status--complete"></span>
  

  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../rate-limiter/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Rate Limiter
    
  </span>
  
    
  
  
    <span class="md-status md-status--complete"></span>
  

  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../digital-wallet-enhanced/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Digital Wallet (Enhanced)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../gaming-leaderboard-enhanced/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Gaming Leaderboard (Enhanced)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../distributed-email-enhanced/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Distributed Email (Enhanced)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../s3-object-storage-enhanced/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    S3 Object Storage (Enhanced)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../consistency-deep-dive-chat/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Consistency Deep Dive Chat
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_9" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../reference/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    📖 Reference
    
  </span>
  
    
  
  
    <span class="md-status md-status--stub"></span>
  

  

            </a>
            
              
              <label class="md-nav__link " for="__nav_9" id="__nav_9_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_9_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_9">
            <span class="md-nav__icon md-icon"></span>
            📖 Reference
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_9_2" >
        
          
          <label class="md-nav__link" for="__nav_9_2" id="__nav_9_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Essential References
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_9_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_9_2">
            <span class="md-nav__icon md-icon"></span>
            Essential References
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/axiom-mapping-guide/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Law Mapping Guide
    
  </span>
  
    
  
  
    <span class="md-status md-status--complete"></span>
  

  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/glossary/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Glossary
    
  </span>
  
    
  
  
    <span class="md-status md-status--complete"></span>
  

  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/cheat-sheets/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Cheat Sheets
    
  </span>
  
    
  
  
    <span class="md-status md-status--complete"></span>
  

  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/recipe-cards/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Recipe Cards
    
  </span>
  
    
  
  
    <span class="md-status md-status--complete"></span>
  

  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/security/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Security
    
  </span>
  
    
  
  
    <span class="md-status md-status--complete"></span>
  

  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


  
    <a href="https://github.com/deepaucksharma/DStudio/edit/main/docs/case-studies/web-crawler.md" title="Edit this page" class="md-content__button md-icon" rel="edit">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M10 20H6V4h7v5h5v3.1l2-2V8l-6-6H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h4zm10.2-7c.1 0 .3.1.4.2l1.3 1.3c.2.2.2.6 0 .8l-1 1-2.1-2.1 1-1c.1-.1.2-.2.4-.2m0 3.9L14.1 23H12v-2.1l6.1-6.1z"/></svg>
    </a>
  
  


<h1 id="distributed-web-crawler">Distributed Web Crawler<a class="headerlink" href="#distributed-web-crawler" title="Permanent link">&para;</a></h1>
<h2 id="challenge-statement">🎯 Challenge Statement<a class="headerlink" href="#challenge-statement" title="Permanent link">&para;</a></h2>
<p>Design a web crawler for 10B+ pages/month with robots.txt compliance, rate limiting, dynamic content handling, deduplication, and freshness maintenance at internet scale.</p>
<h2 id="part-1-concept-map">Part 1: Concept Map<a class="headerlink" href="#part-1-concept-map" title="Permanent link">&para;</a></h2>
<h3 id="system-overview">🗺️ System Overview<a class="headerlink" href="#system-overview" title="Permanent link">&para;</a></h3>
<p>Systematic web browsing for discovering and fetching pages, balancing aggressive crawling with server politeness.</p>
<p><strong>Requirements:</strong> 10B+ pages/month, robots.txt compliance, JavaScript handling, deduplication, 100B+ URL frontier, focused/broad crawling, failure handling, freshness maintenance</p>
<h3 id="axiom-analysis">📐 Axiom Analysis<a class="headerlink" href="#axiom-analysis" title="Permanent link">&para;</a></h3>
<h4 id="axiom-1-latency-crawl-speed-optimization">🚀 Axiom 1 (Latency): Crawl Speed Optimization<a class="headerlink" href="#axiom-1-latency-crawl-speed-optimization" title="Permanent link">&para;</a></h4>
<div class="language-text highlight"><pre><span></span><code><span id="__span-0-1"><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a>Latency: DNS 10-50ms, TCP 10-100ms, TLS 20-200ms, HTTP 50-500ms, Download 100-5000ms, Processing 10-100ms
</span><span id="__span-0-2"><a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a>Optimizations: DNS caching/prefetch, connection pooling, HTTP/2, parallel crawling, geo-distribution, async I/O
</span></code></pre></div>
<p><strong>High-Performance Crawler Architecture:</strong></p>
<pre class="mermaid"><code>graph TB
    subgraph "Connection Management"
        CP[Connection Pool&lt;br/&gt;1000 total&lt;br/&gt;10 per host]
        DC[DNS Cache&lt;br/&gt;5 min TTL]
        SSL[SSL Context]
        HTTP2[HTTP/2 Multiplexing]
    end

    subgraph "Async Components"
        AS[Async Session]
        AR[Async Resolver]
        SC[Stream Content]
        PC[Parallel Crawl]
    end

    subgraph "Performance Tracking"
        CS[Crawl Stats]
        MT[Metrics]
        PS[Performance Stats]
    end

    CP --&gt; AS
    DC --&gt; AR
    SSL --&gt; AS
    AS --&gt; SC
    AS --&gt; PC

    SC --&gt; CS
    PC --&gt; MT
    CS --&gt; PS</code></pre>
<p><strong>Crawl Request Flow:</strong></p>
<pre class="mermaid"><code>sequenceDiagram
    participant C as Crawler
    participant DNS as DNS Cache
    participant S as Session
    participant T as Target Site
    participant M as Metrics

    C-&gt;&gt;DNS: Check DNS cache

    alt Cache Miss
        DNS-&gt;&gt;DNS: Prefetch DNS
        DNS-&gt;&gt;DNS: Cache IPs
    end

    C-&gt;&gt;S: Create connection
    Note over S: Reuse existing or&lt;br/&gt;create new from pool

    S-&gt;&gt;T: HTTP request
    T--&gt;&gt;S: Stream response

    S-&gt;&gt;S: Check size limits
    S-&gt;&gt;M: Update metrics

    S--&gt;&gt;C: Return content
    C-&gt;&gt;M: Record stats</code></pre>
<p><strong>Performance Optimizations:</strong></p>
<p><strong>Performance Optimizations:</strong>
- DNS caching: -50ms/request
- Connection pooling: -100ms handshake
- SSL/TLS reuse: -200ms/connection
- HTTP/2 multiplexing: 3x throughput
- Stream content: Memory efficient
- Async I/O: 100x concurrency</p>
<p><strong>Connection Pool Management:</strong></p>
<pre class="mermaid"><code>graph LR
    subgraph "Per-Host Pools"
        H1[Host A&lt;br/&gt;10 connections]
        H2[Host B&lt;br/&gt;10 connections]
        H3[Host C&lt;br/&gt;10 connections]
    end

    subgraph "Global Pool"
        GP[Total: 1000&lt;br/&gt;Available: 970]
    end

    subgraph "Connection States"
        A[Active]
        I[Idle]
        C[Closing]
    end

    GP --&gt; H1
    GP --&gt; H2
    GP --&gt; H3

    H1 --&gt; A
    H1 --&gt; I
    H2 --&gt; A
    H3 --&gt; I</code></pre>
<p><strong>Latency Breakdown:</strong></p>
<pre class="mermaid"><code>gantt
    title Request Latency Components
    dateFormat X
    axisFormat %Lms

    section Without Optimization
    DNS Resolution    :dns1, 0, 50
    TCP Connect      :tcp1, 50, 100
    TLS Handshake    :tls1, 150, 200
    HTTP Request     :http1, 350, 50
    Content Download :cont1, 400, 500

    section With Optimization
    DNS (Cached)     :dns2, 0, 5
    TCP (Pooled)     :tcp2, 5, 10
    TLS (Reused)     :tls2, 15, 5
    HTTP Request     :http2, 20, 50
    Content Stream   :cont2, 70, 300</code></pre>
<h4 id="axiom-2-capacity-url-frontier-management">💾 Axiom 2 (Capacity): URL Frontier Management<a class="headerlink" href="#axiom-2-capacity-url-frontier-management" title="Permanent link">&para;</a></h4>
<div class="language-text highlight"><pre><span></span><code><span id="__span-1-1"><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a>Storage: URL frontier 10TB (100B URLs), Crawled pages 500TB, Link graph 16TB, Metadata 10TB
</span><span id="__span-1-2"><a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a>Challenges: Frontier growth, duplicate detection, content storage, index management, bandwidth limits
</span></code></pre></div>
<p><strong>URL Frontier Architecture:</strong></p>
<pre class="mermaid"><code>graph TB
    subgraph "Storage Layer"
        RDB[RocksDB&lt;br/&gt;Persistent Storage]
        URL[URL DB&lt;br/&gt;10TB capacity]
        SEEN[Seen DB&lt;br/&gt;Deduplication]
        META[Metadata DB&lt;br/&gt;URL properties]
    end

    subgraph "Memory Layer"
        BF[Bloom Filter&lt;br/&gt;10B URLs&lt;br/&gt;0.1% error]
        PQ[Priority Queues&lt;br/&gt;1000 queues]
        DQ[Domain Queues&lt;br/&gt;Politeness]
    end

    subgraph "Processing"
        NORM[URL Normalizer]
        DUP[Duplicate Checker]
        POL[Politeness Enforcer]
    end

    NORM --&gt; DUP
    DUP --&gt; BF
    BF --&gt; SEEN

    URL --&gt; PQ
    PQ --&gt; DQ
    DQ --&gt; POL</code></pre>
<p><strong>URL Processing Flow:</strong></p>
<pre class="mermaid"><code>sequenceDiagram
    participant U as New URL
    participant N as Normalizer
    participant B as Bloom Filter
    participant D as Duplicate Check
    participant Q as Queue Manager
    participant P as Priority Queue
    participant R as RocksDB

    U-&gt;&gt;N: Normalize URL
    N-&gt;&gt;B: Check bloom filter

    alt Not in Bloom
        B-&gt;&gt;D: Not seen
        D-&gt;&gt;Q: Calculate queue ID
        Q-&gt;&gt;P: Add to priority queue
        Q-&gt;&gt;R: Store in RocksDB
        Q-&gt;&gt;B: Add to bloom filter
    else In Bloom
        B-&gt;&gt;D: Possible duplicate
        D-&gt;&gt;R: Check RocksDB
        alt Confirmed Duplicate
            R--&gt;&gt;U: Reject (duplicate)
        else False Positive
            R-&gt;&gt;Q: Process as new
        end
    end</code></pre>
<p><strong>Frontier Data Structure:</strong></p>
<table>
<thead>
<tr>
<th>Component</th>
<th>Implementation</th>
<th>Capacity</th>
<th>Purpose</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Bloom Filter</strong></td>
<td>Bit array</td>
<td>10B URLs</td>
<td>Fast duplicate check</td>
</tr>
<tr>
<td><strong>Priority Queues</strong></td>
<td>Min heap × 1000</td>
<td>100M URLs/queue</td>
<td>Priority scheduling</td>
</tr>
<tr>
<td><strong>Domain Queues</strong></td>
<td>HashMap</td>
<td>10M domains</td>
<td>Politeness tracking</td>
</tr>
<tr>
<td><strong>RocksDB URLs</strong></td>
<td>LSM tree</td>
<td>100B URLs</td>
<td>Persistent storage</td>
</tr>
<tr>
<td><strong>RocksDB Seen</strong></td>
<td>LSM tree</td>
<td>10B entries</td>
<td>Deduplication</td>
</tr>
<tr>
<td><strong>RocksDB Meta</strong></td>
<td>LSM tree</td>
<td>10B entries</td>
<td>URL metadata</td>
</tr>
</tbody>
</table>
<p><strong>Politeness Enforcement:</strong></p>
<pre class="mermaid"><code>stateDiagram-v2
    [*] --&gt; CheckDomain

    CheckDomain --&gt; InBatch: Domain in current batch
    CheckDomain --&gt; CheckDelay: Domain not in batch

    InBatch --&gt; Reject: Cannot crawl parallel

    CheckDelay --&gt; CheckTime: Get last access time
    CheckTime --&gt; TooSoon: Time &lt; crawl_delay
    CheckTime --&gt; OK: Time &gt;= crawl_delay

    TooSoon --&gt; Requeue: Re-queue for later
    OK --&gt; Crawl: Add to batch

    Crawl --&gt; UpdateTime: Update last access
    UpdateTime --&gt; [*]

    Reject --&gt; [*]
    Requeue --&gt; [*]</code></pre>
<p><strong>URL Normalization Process:</strong></p>
<pre class="mermaid"><code>graph LR
    U[Raw URL] --&gt; LC[Lowercase]
    LC --&gt; RP[Remove Port&lt;br/&gt;:80 :443]
    RP --&gt; SQ[Sort Query&lt;br/&gt;Parameters]
    SQ --&gt; RF[Remove&lt;br/&gt;Fragment]
    RF --&gt; RT[Remove Trailing&lt;br/&gt;Slash]
    RT --&gt; N[Normalized URL]</code></pre>
<p><strong>Queue Distribution Strategy:</strong></p>
<pre class="mermaid"><code>graph TB
    subgraph "Queue Assignment"
        URL[URL Input]
        DH[Domain Hash]
        PR[Priority Score]
        QID[Queue ID]
    end

    subgraph "1000 Priority Queues"
        Q1[Queue 0-99&lt;br/&gt;High Priority]
        Q2[Queue 100-499&lt;br/&gt;Medium Priority]
        Q3[Queue 500-999&lt;br/&gt;Low Priority]
    end

    URL --&gt; DH
    URL --&gt; PR
    DH --&gt; QID
    PR --&gt; QID

    QID --&gt; Q1
    QID --&gt; Q2
    QID --&gt; Q3</code></pre>
<p><strong>Content Deduplication System:</strong></p>
<pre class="mermaid"><code>graph TB
    subgraph "Deduplication Methods"
        EH[Exact Hash&lt;br/&gt;SHA256]
        SH[SimHash&lt;br/&gt;Near-duplicate]
        SG[Shingles&lt;br/&gt;Similarity]
    end

    subgraph "Storage"
        CH[Content Hashes&lt;br/&gt;RocksDB]
        SI[SimHash Index&lt;br/&gt;LSH]
        SX[Shingle Index]
    end

    subgraph "Processing"
        C[Content] --&gt; EH
        C --&gt; SH
        C --&gt; SG

        EH --&gt; CH
        SH --&gt; SI
        SG --&gt; SX
    end</code></pre>
<p><strong>Duplicate Detection Flow:</strong></p>
<pre class="mermaid"><code>sequenceDiagram
    participant C as Content
    participant E as Exact Hash
    participant S as SimHash
    participant I as Index
    participant R as Result

    C-&gt;&gt;E: Calculate SHA256
    E-&gt;&gt;I: Check exact match

    alt Exact Match Found
        I--&gt;&gt;R: Return duplicate (100%)
    else No Exact Match
        C-&gt;&gt;S: Calculate SimHash
        S-&gt;&gt;I: Find similar (distance ≤ 3)

        alt Similar Found
            S-&gt;&gt;S: Calculate similarity
            alt Similarity ≥ 90%
                S--&gt;&gt;R: Return near-duplicate
            else Similarity &lt; 90%
                S-&gt;&gt;I: Index as new
                I--&gt;&gt;R: Not duplicate
            end
        else No Similar
            S-&gt;&gt;I: Index content
            I--&gt;&gt;R: Not duplicate
        end
    end</code></pre>
<p><strong>SimHash Algorithm Visualization:</strong></p>
<pre class="mermaid"><code>graph LR
    subgraph "Tokenization"
        T[Text] --&gt; TK[Tokens]
    end

    subgraph "Hash Calculation"
        TK --&gt; H1[Hash Token 1]
        TK --&gt; H2[Hash Token 2]
        TK --&gt; H3[Hash Token N]
    end

    subgraph "Vector Accumulation"
        H1 --&gt; V[64-bit Vector&lt;br/&gt;+1/-1 weights]
        H2 --&gt; V
        H3 --&gt; V
    end

    subgraph "Fingerprint"
        V --&gt; F[Binary Fingerprint&lt;br/&gt;Positive→1, Negative→0]
    end</code></pre>
<p><strong>Deduplication Strategies Comparison:</strong></p>
<table>
<thead>
<tr>
<th>Method</th>
<th>Detection Type</th>
<th>Speed</th>
<th>Accuracy</th>
<th>Storage</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Exact Hash</strong></td>
<td>Identical content</td>
<td>O(1)</td>
<td>100%</td>
<td>32 bytes/URL</td>
</tr>
<tr>
<td><strong>SimHash</strong></td>
<td>Near-duplicates</td>
<td>O(log n)</td>
<td>95%+</td>
<td>8 bytes/URL</td>
</tr>
<tr>
<td><strong>Shingles</strong></td>
<td>Text similarity</td>
<td>O(n)</td>
<td>Variable</td>
<td>~1KB/doc</td>
</tr>
<tr>
<td><strong>MinHash</strong></td>
<td>Set similarity</td>
<td>O(k)</td>
<td>90%+</td>
<td>128 bytes/URL</td>
</tr>
</tbody>
</table>
<h4 id="axiom-3-failure-robust-crawling">🔥 Axiom 3 (Failure): Robust Crawling<a class="headerlink" href="#axiom-3-failure-robust-crawling" title="Permanent link">&para;</a></h4>
<div class="language-text highlight"><pre><span></span><code><span id="__span-2-1"><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a>Failures: Network timeouts, DNS failures, server errors, malformed HTML, infinite redirects, spider/crawler traps, rate limits
</span><span id="__span-2-2"><a id="__codelineno-2-2" name="__codelineno-2-2" href="#__codelineno-2-2"></a>Mitigations: Exponential backoff, circuit breakers, redirect limits, pattern detection, checkpointing, distributed coordination
</span></code></pre></div>
<p><strong>Resilient Crawler Architecture:</strong></p>
<pre class="mermaid"><code>graph TB
    subgraph "Failure Handling"
        CB[Circuit Breakers&lt;br/&gt;Per Domain]
        RT[Retry Logic&lt;br/&gt;Exponential Backoff]
        FT[Failure Tracking]
        CP[Checkpointing]
    end

    subgraph "Trap Detection"
        ST[Spider Trap&lt;br/&gt;Detection]
        CT[Crawler Trap&lt;br/&gt;Detection]
        UP[URL Pattern&lt;br/&gt;Analysis]
    end

    subgraph "Compliance"
        RC[Robots.txt&lt;br/&gt;Cache]
        CD[Crawl Delay&lt;br/&gt;Enforcement]
        UA[User Agent&lt;br/&gt;Identification]
    end

    CB --&gt; RT
    ST --&gt; UP
    RC --&gt; CD</code></pre>
<p><strong>Crawl Failure Recovery Flow:</strong></p>
<pre class="mermaid"><code>sequenceDiagram
    participant C as Crawler
    participant CB as Circuit Breaker
    participant R as Robots Check
    participant T as Trap Detection
    participant F as Fetch
    participant RT as Retry Logic

    C-&gt;&gt;CB: Check domain availability

    alt Circuit Open
        CB--&gt;&gt;C: Return error
    else Circuit Closed
        CB-&gt;&gt;R: Check robots.txt

        alt Disallowed
            R--&gt;&gt;C: Return robots error
        else Allowed
            R-&gt;&gt;T: Check spider traps

            alt Trap Detected
                T--&gt;&gt;C: Return trap error
            else Safe
                T-&gt;&gt;F: Attempt fetch

                alt Success
                    F--&gt;&gt;C: Return content
                else Failure
                    F-&gt;&gt;RT: Retry with backoff
                    RT-&gt;&gt;F: Retry attempts
                    RT--&gt;&gt;C: Final result
                end
            end
        end
    end</code></pre>
<p><strong>Circuit Breaker States:</strong></p>
<pre class="mermaid"><code>stateDiagram-v2
    [*] --&gt; Closed

    Closed --&gt; Open: Failures &gt; Threshold
    Open --&gt; HalfOpen: After timeout
    HalfOpen --&gt; Closed: Success
    HalfOpen --&gt; Open: Failure

    state Closed {
        [*] --&gt; Monitoring
        Monitoring --&gt; Counting: Request
        Counting --&gt; Monitoring: Success
        Counting --&gt; Failed: Failure
        Failed --&gt; Monitoring: Count++
    }

    state Open {
        [*] --&gt; Rejecting
        Rejecting --&gt; WaitTimeout: All requests
    }

    state HalfOpen {
        [*] --&gt; Testing
        Testing --&gt; Limited: Allow few
    }</code></pre>
<p><strong>Spider Trap Detection Patterns:</strong></p>
<table>
<thead>
<tr>
<th>Pattern Type</th>
<th>Detection Method</th>
<th>Example</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Deep URLs</strong></td>
<td>Path depth &gt; 10</td>
<td><code>/a/b/c/d/e/f/g/h/i/j/k</code></td>
</tr>
<tr>
<td><strong>Repeating Paths</strong></td>
<td>Pattern detection</td>
<td><code>/page/1/page/2/page/3</code></td>
</tr>
<tr>
<td><strong>Excessive Parameters</strong></td>
<td>Query count &gt; 20</td>
<td><code>?p1=v1&amp;p2=v2&amp;...&amp;p20=v20</code></td>
</tr>
<tr>
<td><strong>Known Patterns</strong></td>
<td>Regex matching</td>
<td><code>/test/test/test/</code></td>
</tr>
<tr>
<td><strong>Similar URLs</strong></td>
<td>Pattern frequency</td>
<td>500+ URLs with same structure</td>
</tr>
<tr>
<td><strong>Infinite Loops</strong></td>
<td>Redirect chains</td>
<td>A→B→C→A</td>
</tr>
</tbody>
</table>
<p><strong>Retry Strategy:</strong></p>
<pre class="mermaid"><code>graph LR
    subgraph "Retry Timing"
        A1[Attempt 1&lt;br/&gt;Immediate]
        A2[Attempt 2&lt;br/&gt;2s + random]
        A3[Attempt 3&lt;br/&gt;4s + random]
        A4[Final Failure]
    end

    A1 --&gt;|Fail| A2
    A2 --&gt;|Fail| A3
    A3 --&gt;|Fail| A4

    A1 --&gt;|Success| S[Return]
    A2 --&gt;|Success| S
    A3 --&gt;|Success| S</code></pre>
<p><strong>Robots.txt Caching:</strong></p>
<pre class="mermaid"><code>graph TB
    subgraph "Cache Strategy"
        URL[URL Request]
        CC[Check Cache]
        CV[Validate TTL&lt;br/&gt;24 hours]

        CC --&gt;|Hit| CV
        CV --&gt;|Valid| USE[Use Cached]
        CV --&gt;|Expired| FETCH[Fetch New]
        CC --&gt;|Miss| FETCH

        FETCH --&gt; PARSE[Parse Rules]
        PARSE --&gt; CACHE[Update Cache]
        PARSE --&gt; DELAY[Extract Delay]
    end</code></pre>
<div class="language-text highlight"><pre><span></span><code># Trap detection and recovery implementation details...
</code></pre></div>
<p>```
</p>
<h4 id="axiom-4-concurrency-parallel-crawling">🔀 Axiom 4 (Concurrency): Parallel Crawling<a class="headerlink" href="#axiom-4-concurrency-parallel-crawling" title="Permanent link">&para;</a></h4>
<p><code>text
Concurrency Challenges:
- Thousands of parallel connections
- Domain-level politeness
- Race conditions in URL frontier
- Shared state management
- Memory pressure
- Connection pool exhaustion

Optimization Strategies:
- Async I/O throughout
- Domain-based sharding
- Lock-free data structures
- Memory-mapped files
- Zero-copy techniques</code></p>
<p><strong>Massively Parallel Crawler Architecture:</strong></p>
<pre class="mermaid"><code>graph TB
    subgraph "Worker Pool"
        W1[Worker 1]
        W2[Worker 2]
        W3[Worker N&lt;br/&gt;100 workers]
    end

    subgraph "Queue System"
        UQ[URL Queue&lt;br/&gt;10K capacity]
        RQ[Result Queue&lt;br/&gt;10K capacity]
    end

    subgraph "Processing"
        PP[Process Pool&lt;br/&gt;CPU cores]
        DS[Domain Semaphores&lt;br/&gt;Politeness]
        MM[Memory Mapping&lt;br/&gt;Zero-copy]
    end

    subgraph "Components"
        UF[URL Feeder]
        RP[Result Processor]
        PM[Performance Monitor]
    end

    UF --&gt; UQ
    UQ --&gt; W1
    UQ --&gt; W2
    UQ --&gt; W3

    W1 --&gt; DS
    W2 --&gt; DS
    W3 --&gt; DS

    DS --&gt; PP
    PP --&gt; RQ
    RQ --&gt; RP</code></pre>
<p><strong>Parallel Crawling Flow:</strong></p>
<pre class="mermaid"><code>sequenceDiagram
    participant F as URL Feeder
    participant Q as URL Queue
    participant W as Worker
    participant S as Semaphore
    participant P as Process Pool
    participant R as Result Queue
    participant B as Batch Processor

    F-&gt;&gt;Q: Feed URLs

    par Worker Operations
        W-&gt;&gt;Q: Get URL
        W-&gt;&gt;S: Acquire domain lock
        W-&gt;&gt;W: Fetch content
        W-&gt;&gt;P: Extract data (CPU)
        P--&gt;&gt;W: Extracted info
        W-&gt;&gt;R: Queue result
        W-&gt;&gt;S: Release lock
    end

    R-&gt;&gt;B: Collect batch
    B-&gt;&gt;B: Store pages
    B-&gt;&gt;B: Store links
    B-&gt;&gt;F: New URLs to frontier</code></pre>
<p><strong>Concurrency Control Mechanisms:</strong></p>
<table>
<thead>
<tr>
<th>Component</th>
<th>Strategy</th>
<th>Purpose</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>URL Queue</strong></td>
<td>Async Queue</td>
<td>Work distribution</td>
</tr>
<tr>
<td><strong>Domain Semaphores</strong></td>
<td>Per-domain limits</td>
<td>Politeness control</td>
</tr>
<tr>
<td><strong>Process Pool</strong></td>
<td>CPU workers</td>
<td>Parallel extraction</td>
</tr>
<tr>
<td><strong>Memory Mapping</strong></td>
<td>Zero-copy buffers</td>
<td>Efficient data sharing</td>
</tr>
<tr>
<td><strong>Batch Processing</strong></td>
<td>Bulk operations</td>
<td>Reduce I/O overhead</td>
</tr>
</tbody>
</table>
<p><strong>Domain-Based Politeness:</strong></p>
<pre class="mermaid"><code>graph LR
    subgraph "Domain Semaphores"
        D1[example.com&lt;br/&gt;10 concurrent]
        D2[site.org&lt;br/&gt;10 concurrent]
        D3[blog.net&lt;br/&gt;10 concurrent]
    end

    subgraph "Workers"
        W1[Worker 1]
        W2[Worker 2]
        W3[Worker 3]
        W4[Worker 4]
    end

    W1 --&gt; D1
    W2 --&gt; D1
    W3 --&gt; D2
    W4 --&gt; D3

    D1 --&gt; L1[Limit: 10]
    D2 --&gt; L2[Limit: 10]
    D3 --&gt; L3[Limit: 10]</code></pre>
<p><strong>Memory-Mapped Architecture:</strong></p>
<pre class="mermaid"><code>graph TB
    subgraph "Memory-Mapped Files"
        UB[URL Buffer&lt;br/&gt;1GB capacity&lt;br/&gt;5M URLs]
        BF[Bloom Filter&lt;br/&gt;4GB capacity&lt;br/&gt;10B items]
    end

    subgraph "Process Access"
        P1[Process 1]
        P2[Process 2]
        P3[Process N]
    end

    P1 --&gt; UB
    P2 --&gt; UB
    P3 --&gt; UB

    P1 --&gt; BF
    P2 --&gt; BF
    P3 --&gt; BF

    Note over UB,BF: Zero-copy shared memory</code></pre>
<p><strong>Performance Auto-Tuning:</strong></p>
<pre class="mermaid"><code>stateDiagram-v2
    [*] --&gt; Monitor

    Monitor --&gt; CheckQueue: Every 10s

    CheckQueue --&gt; LowQueue: Queue &lt; 100
    CheckQueue --&gt; HighQueue: Queue &gt; 5000
    CheckQueue --&gt; Normal: 100 ≤ Queue ≤ 5000

    LowQueue --&gt; IncreaseFeed: Feed rate × 1.1
    HighQueue --&gt; DecreaseFeed: Feed rate × 0.9
    Normal --&gt; Maintain: No change

    IncreaseFeed --&gt; Monitor
    DecreaseFeed --&gt; Monitor
    Maintain --&gt; Monitor</code></pre>
<p><strong>Batch Processing Strategy:</strong></p>
<pre class="mermaid"><code>graph LR
    subgraph "Result Collection"
        R1[Result 1]
        R2[Result 2]
        R3[Result N]
    end

    subgraph "Batching"
        B[Batch Buffer&lt;br/&gt;Size: 100]
        T[Timeout: 1s]
    end

    subgraph "Storage Operations"
        SP[Store Pages&lt;br/&gt;Bulk Insert]
        SL[Store Links&lt;br/&gt;Bulk Insert]
        UF[Update Frontier&lt;br/&gt;Batch Add]
    end

    R1 --&gt; B
    R2 --&gt; B
    R3 --&gt; B

    B --&gt;|Full or Timeout| SP
    B --&gt; SL
    SL --&gt; UF</code></pre>
<h4 id="axiom-5-coordination-distributed-crawling">🤝 Axiom 5 (Coordination): Distributed Crawling<a class="headerlink" href="#axiom-5-coordination-distributed-crawling" title="Permanent link">&para;</a></h4>
<div class="language-text highlight"><pre><span></span><code><span id="__span-4-1"><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a>Coordination Requirements:
</span><span id="__span-4-2"><a id="__codelineno-4-2" name="__codelineno-4-2" href="#__codelineno-4-2"></a>- URL assignment without duplication
</span><span id="__span-4-3"><a id="__codelineno-4-3" name="__codelineno-4-3" href="#__codelineno-4-3"></a>- Crawl state synchronization
</span><span id="__span-4-4"><a id="__codelineno-4-4" name="__codelineno-4-4" href="#__codelineno-4-4"></a>- Rate limit coordination
</span><span id="__span-4-5"><a id="__codelineno-4-5" name="__codelineno-4-5" href="#__codelineno-4-5"></a>- Failure recovery
</span><span id="__span-4-6"><a id="__codelineno-4-6" name="__codelineno-4-6" href="#__codelineno-4-6"></a>- Work distribution
</span><span id="__span-4-7"><a id="__codelineno-4-7" name="__codelineno-4-7" href="#__codelineno-4-7"></a>
</span><span id="__span-4-8"><a id="__codelineno-4-8" name="__codelineno-4-8" href="#__codelineno-4-8"></a>Coordination Strategies:
</span><span id="__span-4-9"><a id="__codelineno-4-9" name="__codelineno-4-9" href="#__codelineno-4-9"></a>- Consistent hashing for URL assignment
</span><span id="__span-4-10"><a id="__codelineno-4-10" name="__codelineno-4-10" href="#__codelineno-4-10"></a>- Distributed locks for critical sections
</span><span id="__span-4-11"><a id="__codelineno-4-11" name="__codelineno-4-11" href="#__codelineno-4-11"></a>- Gossip for state propagation
</span><span id="__span-4-12"><a id="__codelineno-4-12" name="__codelineno-4-12" href="#__codelineno-4-12"></a>- Leader election for scheduling
</span><span id="__span-4-13"><a id="__codelineno-4-13" name="__codelineno-4-13" href="#__codelineno-4-13"></a>- Checkpointing for recovery
</span></code></pre></div>
<p><strong>Distributed Crawler Coordination Architecture:</strong></p>
<pre class="mermaid"><code>graph TB
    subgraph "Zookeeper Coordination"
        ZK[Zookeeper Cluster]

        subgraph "ZK Paths"
            NP[/crawler/nodes&lt;br/&gt;Active nodes]
            AP[/crawler/assignments&lt;br/&gt;Domain ownership]
            CP[/crawler/checkpoints&lt;br/&gt;Progress tracking]
            RP[/crawler/rate_limits&lt;br/&gt;Politeness]
            LP[/crawler/leader&lt;br/&gt;Leader election]
        end
    end

    subgraph "Crawler Nodes"
        N1[Node 1&lt;br/&gt;Domains A-F]
        N2[Node 2&lt;br/&gt;Domains G-M]
        N3[Node 3&lt;br/&gt;Domains N-Z]
    end

    N1 --&gt; ZK
    N2 --&gt; ZK
    N3 --&gt; ZK

    ZK --&gt; NP
    ZK --&gt; AP
    ZK --&gt; CP
    ZK --&gt; RP
    ZK --&gt; LP</code></pre>
<p><strong>Consistent Hashing for Domain Assignment:</strong></p>
<pre class="mermaid"><code>graph LR
    subgraph "Hash Ring"
        H1[Node1:0-99&lt;br/&gt;Virtual nodes]
        H2[Node2:0-99&lt;br/&gt;Virtual nodes]
        H3[Node3:0-99&lt;br/&gt;Virtual nodes]
    end

    subgraph "Domain Mapping"
        D1[example.com&lt;br/&gt;Hash: 0x3F...]
        D2[site.org&lt;br/&gt;Hash: 0x7A...]
        D3[blog.net&lt;br/&gt;Hash: 0xB2...]
    end

    D1 --&gt; H1
    D2 --&gt; H2
    D3 --&gt; H3

    Note over H1,H3: 100 virtual nodes per physical node&lt;br/&gt;for better distribution</code></pre>
<p><strong>Node Failure Recovery Flow:</strong></p>
<pre class="mermaid"><code>sequenceDiagram
    participant ZK as Zookeeper
    participant N1 as Node 1
    participant N2 as Node 2 (Healthy)
    participant N3 as Node 3 (Healthy)

    Note over N1: Node 1 fails
    ZK-&gt;&gt;ZK: Ephemeral node expires
    ZK-&gt;&gt;N2: Node change notification
    ZK-&gt;&gt;N3: Node change notification

    N2-&gt;&gt;ZK: Get failed assignments
    N3-&gt;&gt;ZK: Get failed assignments

    par Redistribution
        N2-&gt;&gt;N2: Calculate new assignments
        N3-&gt;&gt;N3: Calculate new assignments
    end

    N2-&gt;&gt;ZK: Update assignments
    N3-&gt;&gt;ZK: Update assignments

    Note over N2,N3: Domains redistributed&lt;br/&gt;using consistent hashing</code></pre>
<p><strong>Distributed Rate Limiting:</strong></p>
<pre class="mermaid"><code>stateDiagram-v2
    [*] --&gt; CheckRateLimit

    CheckRateLimit --&gt; GetDomainInfo: Read from ZK

    GetDomainInfo --&gt; CheckDelay: Info exists
    GetDomainInfo --&gt; CreateNew: First access

    CheckDelay --&gt; Wait: Too soon
    CheckDelay --&gt; TryAcquire: Delay passed

    TryAcquire --&gt; UpdateZK: Optimistic lock
    UpdateZK --&gt; Success: Version match
    UpdateZK --&gt; Retry: Version conflict

    Wait --&gt; CheckDelay: After delay
    Retry --&gt; CheckRateLimit

    Success --&gt; [*]
    CreateNew --&gt; [*]</code></pre>
<p><strong>Leader Election Process:</strong></p>
<pre class="mermaid"><code>graph TD
    subgraph "Election Process"
        CN[Create Node&lt;br/&gt;/leader/node_0001]
        GC[Get Children]
        CL[Check Lowest]

        CN --&gt; GC
        GC --&gt; CL

        CL --&gt;|Is Lowest| BL[Become Leader]
        CL --&gt;|Not Lowest| WP[Watch Previous]

        WP --&gt; GC
    end

    subgraph "Leader Duties"
        BL --&gt; SD[Schedule Domains]
        BL --&gt; MH[Monitor Health]
        BL --&gt; RB[Rebalance Load]
    end</code></pre>
<p><strong>Coordination State Management:</strong></p>
<pre class="mermaid"><code>graph TB
    subgraph "Node Registration"
        R[Register Node]
        R --&gt; EN[Ephemeral Node&lt;br/&gt;Auto-cleanup]
        R --&gt; ND[Node Data&lt;br/&gt;ID, Host, Capacity]
    end

    subgraph "Assignment Tracking"
        AD[Assigned Domains]
        AD --&gt; ZS[ZK Storage]
        AD --&gt; LC[Local Cache]
        AD --&gt; VU[Version Updates]
    end

    subgraph "Progress Checkpointing"
        CP[Checkpoint Data]
        CP --&gt; ST[Stats]
        CP --&gt; TS[Timestamp]
        CP --&gt; DL[Domain List]
    end

    EN --&gt; AD
    AD --&gt; CP</code></pre>
<p><strong>Distributed Crawler Communication:</strong></p>
<table>
<thead>
<tr>
<th>Component</th>
<th>Purpose</th>
<th>Implementation</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Node Registry</strong></td>
<td>Track active crawlers</td>
<td>Ephemeral ZK nodes</td>
</tr>
<tr>
<td><strong>Domain Assignment</strong></td>
<td>Distribute work</td>
<td>Consistent hashing</td>
</tr>
<tr>
<td><strong>Rate Limiting</strong></td>
<td>Global politeness</td>
<td>Distributed locks</td>
</tr>
<tr>
<td><strong>Checkpointing</strong></td>
<td>Failure recovery</td>
<td>Periodic ZK writes</td>
</tr>
<tr>
<td><strong>Leader Election</strong></td>
<td>Central coordination</td>
<td>Sequential ZK nodes</td>
</tr>
<tr>
<td><strong>Health Monitoring</strong></td>
<td>Detect failures</td>
<td>ZK watches</td>
</tr>
<tr>
<td>if self.zk.exists(prev_path, watch=True):</td>
<td></td>
<td></td>
</tr>
<tr>
<td>time.sleep(1)</td>
<td></td>
<td></td>
</tr>
<tr>
<td><div class="language-text highlight"><pre><span></span><code><span id="__span-5-1"><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a>#### 👁️ Axiom 6 (Observability): Crawl Monitoring
</span><span id="__span-5-2"><a id="__codelineno-5-2" name="__codelineno-5-2" href="#__codelineno-5-2"></a>```text
</span><span id="__span-5-3"><a id="__codelineno-5-3" name="__codelineno-5-3" href="#__codelineno-5-3"></a>Monitoring Requirements:
</span><span id="__span-5-4"><a id="__codelineno-5-4" name="__codelineno-5-4" href="#__codelineno-5-4"></a>- Crawl rate and coverage
</span><span id="__span-5-5"><a id="__codelineno-5-5" name="__codelineno-5-5" href="#__codelineno-5-5"></a>- Error rates by domain
</span><span id="__span-5-6"><a id="__codelineno-5-6" name="__codelineno-5-6" href="#__codelineno-5-6"></a>- URL frontier size
</span><span id="__span-5-7"><a id="__codelineno-5-7" name="__codelineno-5-7" href="#__codelineno-5-7"></a>- Duplicate detection rate
</span><span id="__span-5-8"><a id="__codelineno-5-8" name="__codelineno-5-8" href="#__codelineno-5-8"></a>- Politeness violations
</span><span id="__span-5-9"><a id="__codelineno-5-9" name="__codelineno-5-9" href="#__codelineno-5-9"></a>- Content quality metrics
</span><span id="__span-5-10"><a id="__codelineno-5-10" name="__codelineno-5-10" href="#__codelineno-5-10"></a>
</span><span id="__span-5-11"><a id="__codelineno-5-11" name="__codelineno-5-11" href="#__codelineno-5-11"></a>Observability Stack:
</span><span id="__span-5-12"><a id="__codelineno-5-12" name="__codelineno-5-12" href="#__codelineno-5-12"></a>- Prometheus metrics
</span><span id="__span-5-13"><a id="__codelineno-5-13" name="__codelineno-5-13" href="#__codelineno-5-13"></a>- Grafana dashboards
</span><span id="__span-5-14"><a id="__codelineno-5-14" name="__codelineno-5-14" href="#__codelineno-5-14"></a>- Distributed tracing
</span><span id="__span-5-15"><a id="__codelineno-5-15" name="__codelineno-5-15" href="#__codelineno-5-15"></a>- Log aggregation
</span><span id="__span-5-16"><a id="__codelineno-5-16" name="__codelineno-5-16" href="#__codelineno-5-16"></a>- Alerting rules
</span></code></pre></div></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<p><strong>Crawler Observability Architecture:</strong></p>
<pre class="mermaid"><code>graph TB
    subgraph "Metrics Collection"
        PM[Prometheus Metrics]
        SL[Structured Logs]
        DT[Distributed Tracing]
        HC[Health Checks]
    end

    subgraph "Metric Types"
        C[Counters&lt;br/&gt;URLs crawled&lt;br/&gt;Violations]
        H[Histograms&lt;br/&gt;Latency&lt;br/&gt;Page size]
        G[Gauges&lt;br/&gt;Frontier size&lt;br/&gt;Active workers]
        S[Summary&lt;br/&gt;Duplicate rate]
    end

    subgraph "Visualization"
        GD[Grafana Dashboards]
        JU[Jaeger UI]
        AL[Alert Manager]
    end

    PM --&gt; C
    PM --&gt; H
    PM --&gt; G
    PM --&gt; S

    C --&gt; GD
    H --&gt; GD
    G --&gt; GD

    DT --&gt; JU
    PM --&gt; AL</code></pre>
<p><strong>Observability Flow:</strong></p>
<pre class="mermaid"><code>sequenceDiagram
    participant C as Crawler
    participant T as Tracer
    participant M as Metrics
    participant L as Logger
    participant G as Grafana

    C-&gt;&gt;T: Start span
    T-&gt;&gt;T: Set attributes

    C-&gt;&gt;C: Fetch URL

    par Collect Metrics
        C-&gt;&gt;M: Record counters
        C-&gt;&gt;M: Record latency
        C-&gt;&gt;M: Record content size
    and Log Events
        C-&gt;&gt;L: Structured log
    and Trace
        C-&gt;&gt;T: Add span data
    end

    M-&gt;&gt;G: Export metrics
    T-&gt;&gt;T: End span</code></pre>
<p><strong>Key Metrics Dashboard:</strong></p>
<table>
<thead>
<tr>
<th>Metric</th>
<th>Type</th>
<th>Description</th>
<th>Alert Threshold</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Crawl Rate</strong></td>
<td>Counter</td>
<td>URLs/second</td>
<td>&lt; 10 URLs/min</td>
</tr>
<tr>
<td><strong>Error Rate</strong></td>
<td>Counter</td>
<td>Failed requests</td>
<td>&gt; 10%</td>
</tr>
<tr>
<td><strong>Latency P95</strong></td>
<td>Histogram</td>
<td>95<sup>th</sup> percentile</td>
<td>&gt; 5 seconds</td>
</tr>
<tr>
<td><strong>Frontier Size</strong></td>
<td>Gauge</td>
<td>Queued URLs</td>
<td>= 0 for 10min</td>
</tr>
<tr>
<td><strong>Page Size P50</strong></td>
<td>Histogram</td>
<td>Median size</td>
<td>-</td>
</tr>
<tr>
<td><strong>Links/Page</strong></td>
<td>Histogram</td>
<td>Extracted links</td>
<td>-</td>
</tr>
<tr>
<td><strong>Robots Violations</strong></td>
<td>Counter</td>
<td>Disallowed URLs</td>
<td>&gt; 0</td>
</tr>
</tbody>
</table>
<p><strong>Grafana Dashboard Panels:</strong></p>
<pre class="mermaid"><code>graph LR
    subgraph "Row 1: Overview"
        CR[Crawl Rate&lt;br/&gt;Line Graph]
        ER[Error Rate&lt;br/&gt;Line Graph]
        FS[Frontier Size&lt;br/&gt;Gauge]
    end

    subgraph "Row 2: Performance"
        LH[Latency Heatmap]
        PS[Page Size&lt;br/&gt;Distribution]
        LC[Links Count&lt;br/&gt;Histogram]
    end

    subgraph "Row 3: Domains"
        TD[Top Domains&lt;br/&gt;Table]
        ED[Errors by Domain&lt;br/&gt;Bar Chart]
        RV[Violations&lt;br/&gt;Counter]
    end</code></pre>
<p><strong>Distributed Tracing Example:</strong></p>
<pre class="mermaid"><code>gantt
    title Crawl Request Trace
    dateFormat X
    axisFormat %Lms

    section Main Span
    crawl_url           :done, main, 0, 500

    section Sub-spans
    DNS Lookup          :done, dns, 0, 50
    Robots Check        :done, robot, 50, 30
    HTTP Request        :done, http, 80, 200
    Content Parse       :done, parse, 280, 100
    Link Extract        :done, links, 380, 50
    Store Result        :done, store, 430, 70</code></pre>
<p><strong>Alert Configuration:</strong></p>
<pre class="mermaid"><code>stateDiagram-v2
    [*] --&gt; Monitoring

    Monitoring --&gt; CheckMetrics

    CheckMetrics --&gt; HighError: Error &gt; 10%
    CheckMetrics --&gt; EmptyFrontier: Size = 0
    CheckMetrics --&gt; SlowCrawl: P95 &gt; 5s
    CheckMetrics --&gt; RobotsViolation: Count &gt; 0

    HighError --&gt; FireAlert
    EmptyFrontier --&gt; FireAlert
    SlowCrawl --&gt; FireAlert
    RobotsViolation --&gt; FireAlert

    FireAlert --&gt; Notification
    Notification --&gt; [*]</code></pre>
<p><strong>Health Check Components:</strong></p>
<pre class="mermaid"><code>graph TB
    subgraph "Health Checks"
        HC[Health Endpoint]

        FC[Frontier Check&lt;br/&gt;URLs &gt; 0]
        RC[Rate Check&lt;br/&gt;Crawl rate &gt; 0]
        EC[Error Check&lt;br/&gt;Error &lt; 10%]
        CC[Connection Check&lt;br/&gt;Workers active]
    end

    HC --&gt; FC
    HC --&gt; RC
    HC --&gt; EC
    HC --&gt; CC

    FC --&gt;|All Pass| H[Healthy]
    FC --&gt;|Some Fail| W[Warning]
    FC --&gt;|Critical Fail| U[Unhealthy]</code></pre>
<h4 id="axiom-7-human-interface-crawler-management">👤 Axiom 7 (Human Interface): Crawler Management<a class="headerlink" href="#axiom-7-human-interface-crawler-management" title="Permanent link">&para;</a></h4>
<div class="language-text highlight"><pre><span></span><code><span id="__span-6-1"><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a>Management Requirements:
</span><span id="__span-6-2"><a id="__codelineno-6-2" name="__codelineno-6-2" href="#__codelineno-6-2"></a>- Start/stop/pause crawling
</span><span id="__span-6-3"><a id="__codelineno-6-3" name="__codelineno-6-3" href="#__codelineno-6-3"></a>- Configure crawl policies
</span><span id="__span-6-4"><a id="__codelineno-6-4" name="__codelineno-6-4" href="#__codelineno-6-4"></a>- Monitor progress
</span><span id="__span-6-5"><a id="__codelineno-6-5" name="__codelineno-6-5" href="#__codelineno-6-5"></a>- Debug specific domains
</span><span id="__span-6-6"><a id="__codelineno-6-6" name="__codelineno-6-6" href="#__codelineno-6-6"></a>- Export crawled data
</span><span id="__span-6-7"><a id="__codelineno-6-7" name="__codelineno-6-7" href="#__codelineno-6-7"></a>- Manage robots.txt
</span><span id="__span-6-8"><a id="__codelineno-6-8" name="__codelineno-6-8" href="#__codelineno-6-8"></a>
</span><span id="__span-6-9"><a id="__codelineno-6-9" name="__codelineno-6-9" href="#__codelineno-6-9"></a>Interfaces:
</span><span id="__span-6-10"><a id="__codelineno-6-10" name="__codelineno-6-10" href="#__codelineno-6-10"></a>- Web dashboard
</span><span id="__span-6-11"><a id="__codelineno-6-11" name="__codelineno-6-11" href="#__codelineno-6-11"></a>- REST API
</span><span id="__span-6-12"><a id="__codelineno-6-12" name="__codelineno-6-12" href="#__codelineno-6-12"></a>- CLI tools
</span><span id="__span-6-13"><a id="__codelineno-6-13" name="__codelineno-6-13" href="#__codelineno-6-13"></a>- Configuration files
</span></code></pre></div>
<p><strong>Crawler Management Architecture:</strong></p>
<pre class="mermaid"><code>graph TB
    subgraph "Management Interfaces"
        API[REST API]
        CLI[CLI Tool]
        WEB[Web Dashboard]
        WS[WebSocket]
    end

    subgraph "Control Functions"
        CS[Crawler Status]
        CC[Crawler Control]
        CF[Configuration]
        EX[Data Export]
    end

    subgraph "Monitoring"
        RT[Real-time Metrics]
        FV[Frontier Viewer]
        DI[Domain Inspector]
        DB[Debug Tools]
    end

    API --&gt; CS
    API --&gt; CC
    CLI --&gt; CF
    WEB --&gt; RT
    WS --&gt; RT</code></pre>
<p><strong>Management API Endpoints:</strong></p>
<table>
<thead>
<tr>
<th>Endpoint</th>
<th>Method</th>
<th>Purpose</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>/api/v1/status</code></td>
<td>GET</td>
<td>Crawler status and stats</td>
</tr>
<tr>
<td><code>/api/v1/control/{action}</code></td>
<td>POST</td>
<td>Start/stop/pause/resume</td>
</tr>
<tr>
<td><code>/api/v1/seeds</code></td>
<td>POST</td>
<td>Add seed URLs</td>
</tr>
<tr>
<td><code>/api/v1/frontier</code></td>
<td>GET</td>
<td>Frontier statistics</td>
</tr>
<tr>
<td><code>/api/v1/domain/{domain}</code></td>
<td>GET</td>
<td>Domain-specific info</td>
</tr>
<tr>
<td><code>/api/v1/config</code></td>
<td>POST</td>
<td>Update configuration</td>
</tr>
<tr>
<td><code>/api/v1/export</code></td>
<td>GET</td>
<td>Export crawled data</td>
</tr>
<tr>
<td><code>/api/v1/debug/{url}</code></td>
<td>GET</td>
<td>Debug URL crawling</td>
</tr>
</tbody>
</table>
<p><strong>Control Flow:</strong></p>
<pre class="mermaid"><code>sequenceDiagram
    participant U as User
    participant API as API
    participant C as Crawler
    participant F as Frontier
    participant W as Workers

    U-&gt;&gt;API: POST /control/start
    API-&gt;&gt;C: start()
    C-&gt;&gt;F: Load URLs
    C-&gt;&gt;W: Start workers
    C--&gt;&gt;API: Status: started

    U-&gt;&gt;API: POST /seeds
    API-&gt;&gt;F: Add URLs
    F--&gt;&gt;API: Added count

    U-&gt;&gt;API: GET /status
    API-&gt;&gt;C: Get stats
    C--&gt;&gt;API: Current metrics</code></pre>
<p><strong>CLI Interface:</strong></p>
<pre class="mermaid"><code>graph LR
    subgraph "CLI Commands"
        ST[crawler start&lt;br/&gt;--seeds-file&lt;br/&gt;--max-pages]
        SU[crawler status]
        DB[crawler debug URL]
        EX[crawler export&lt;br/&gt;--domain&lt;br/&gt;--format]
    end

    subgraph "Actions"
        LS[Load Seeds]
        SC[Start Crawling]
        SS[Show Stats]
        DD[Debug Details]
        ED[Export Data]
    end

    ST --&gt; LS
    ST --&gt; SC
    SU --&gt; SS
    DB --&gt; DD
    EX --&gt; ED</code></pre>
<p><strong>Web Dashboard Components:</strong></p>
<pre class="mermaid"><code>graph TB
    subgraph "Dashboard Layout"
        H[Header&lt;br/&gt;Status &amp; Controls]

        subgraph "Metrics Row"
            CR[Crawl Rate&lt;br/&gt;Gauge]
            FS[Frontier Size&lt;br/&gt;Counter]
            ER[Error Rate&lt;br/&gt;Percentage]
        end

        subgraph "Charts"
            PC[Performance Chart&lt;br/&gt;Time Series]
            FC[Frontier Chart&lt;br/&gt;Priority Distribution]
        end

        subgraph "Tables"
            DT[Domain Stats&lt;br/&gt;Top 20]
            ET[Error Log&lt;br/&gt;Recent]
        end
    end</code></pre>
<p><strong>Real-time WebSocket Updates:</strong></p>
<pre class="mermaid"><code>sequenceDiagram
    participant B as Browser
    participant WS as WebSocket
    participant C as Crawler
    participant M as Metrics

    B-&gt;&gt;WS: Connect /ws/metrics
    WS-&gt;&gt;B: Accept connection

    loop Every 1 second
        WS-&gt;&gt;C: Get metrics
        C-&gt;&gt;M: Collect stats
        M--&gt;&gt;C: Current values
        C--&gt;&gt;WS: Metric data
        WS-&gt;&gt;B: Send JSON
        B-&gt;&gt;B: Update UI
    end

    B-&gt;&gt;WS: Close connection</code></pre>
<p><strong>Debug Interface Flow:</strong></p>
<pre class="mermaid"><code>stateDiagram-v2
    [*] --&gt; InputURL

    InputURL --&gt; Validate
    Validate --&gt; CheckRobots: Valid
    Validate --&gt; Error: Invalid

    CheckRobots --&gt; CheckFrontier
    CheckFrontier --&gt; CheckDuplicate
    CheckDuplicate --&gt; TryCrawl

    TryCrawl --&gt; Success: OK
    TryCrawl --&gt; Failure: Error

    Success --&gt; ShowResult
    Failure --&gt; ShowError

    ShowResult --&gt; [*]
    ShowError --&gt; [*]
    Error --&gt; [*]</code></pre>
<p><strong>Export Functionality:</strong></p>
<pre class="mermaid"><code>graph LR
    subgraph "Export Options"
        FO[Format&lt;br/&gt;JSONL, CSV, Parquet]
        FI[Filters&lt;br/&gt;Domain, Time Range]
        BG[Background Job]
    end

    subgraph "Export Process"
        QD[Query Data]
        TF[Transform Format]
        WF[Write File]
        NF[Notify Complete]
    end

    FO --&gt; QD
    FI --&gt; QD
    QD --&gt; TF
    TF --&gt; WF
    WF --&gt; NF

    BG -.-&gt; QD</code></pre>
<h4 id="axiom-8-economics-cost-optimization">💰 Axiom 8 (Economics): Cost Optimization<a class="headerlink" href="#axiom-8-economics-cost-optimization" title="Permanent link">&para;</a></h4>
<div class="language-text highlight"><pre><span></span><code><span id="__span-7-1"><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a>Cost Components:
</span><span id="__span-7-2"><a id="__codelineno-7-2" name="__codelineno-7-2" href="#__codelineno-7-2"></a>- Bandwidth: $0.05/GB
</span><span id="__span-7-3"><a id="__codelineno-7-3" name="__codelineno-7-3" href="#__codelineno-7-3"></a>- Storage: $0.023/GB/month (S3)
</span><span id="__span-7-4"><a id="__codelineno-7-4" name="__codelineno-7-4" href="#__codelineno-7-4"></a>- Compute: $0.10/hour/instance
</span><span id="__span-7-5"><a id="__codelineno-7-5" name="__codelineno-7-5" href="#__codelineno-7-5"></a>- DNS queries: $0.40/million
</span><span id="__span-7-6"><a id="__codelineno-7-6" name="__codelineno-7-6" href="#__codelineno-7-6"></a>- IP rotation: $0.001/request
</span><span id="__span-7-7"><a id="__codelineno-7-7" name="__codelineno-7-7" href="#__codelineno-7-7"></a>
</span><span id="__span-7-8"><a id="__codelineno-7-8" name="__codelineno-7-8" href="#__codelineno-7-8"></a>Optimization Strategies:
</span><span id="__span-7-9"><a id="__codelineno-7-9" name="__codelineno-7-9" href="#__codelineno-7-9"></a>- Compression
</span><span id="__span-7-10"><a id="__codelineno-7-10" name="__codelineno-7-10" href="#__codelineno-7-10"></a>- Selective crawling
</span><span id="__span-7-11"><a id="__codelineno-7-11" name="__codelineno-7-11" href="#__codelineno-7-11"></a>- Duplicate elimination
</span><span id="__span-7-12"><a id="__codelineno-7-12" name="__codelineno-7-12" href="#__codelineno-7-12"></a>- Bandwidth throttling
</span><span id="__span-7-13"><a id="__codelineno-7-13" name="__codelineno-7-13" href="#__codelineno-7-13"></a>- Spot instances
</span></code></pre></div>
<p><strong>Cost Optimization Architecture:</strong></p>
<pre class="mermaid"><code>graph TB
    subgraph "Cost Components"
        BW[Bandwidth&lt;br/&gt;$0.05/GB]
        ST[Storage&lt;br/&gt;$0.023/GB/month]
        CM[Compute&lt;br/&gt;$0.10/hour]
        DN[DNS&lt;br/&gt;$0.40/million]
        IP[IP Rotation&lt;br/&gt;$0.001/req]
    end

    subgraph "Optimization Strategies"
        CP[Compression]
        DD[Deduplication]
        SI[Spot Instances]
        VS[Value Selection]
        TH[Throttling]
    end

    subgraph "Budget Control"
        DB[Daily Budget&lt;br/&gt;$1000]
        BL[Bandwidth Limit&lt;br/&gt;10TB]
        CT[Cost Tracking]
    end

    BW --&gt; CP
    ST --&gt; DD
    CM --&gt; SI

    CP --&gt; CT
    DD --&gt; CT
    SI --&gt; CT

    CT --&gt; DB
    CT --&gt; BL</code></pre>
<p><strong>Cost Calculation Flow:</strong></p>
<pre class="mermaid"><code>sequenceDiagram
    participant U as URL
    participant CE as Cost Estimator
    participant BC as Budget Check
    participant C as Crawler
    participant CT as Cost Tracker

    U-&gt;&gt;CE: Estimate size
    CE-&gt;&gt;CE: Calculate costs

    CE-&gt;&gt;BC: Check budget

    alt Within Budget
        BC-&gt;&gt;C: Crawl with compression
        C-&gt;&gt;CT: Track actual cost
        CT-&gt;&gt;CT: Update daily total
    else Exceeds Budget
        BC--&gt;&gt;U: Reject (budget exceeded)
    end</code></pre>
<p><strong>Cost Breakdown Structure:</strong></p>
<table>
<thead>
<tr>
<th>Component</th>
<th>Cost</th>
<th>Optimization</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Bandwidth</strong></td>
<td>$0.05/GB</td>
<td>Compression (70% savings)</td>
</tr>
<tr>
<td><strong>Storage</strong></td>
<td>$0.023/GB/month</td>
<td>Deduplication (90% savings)</td>
</tr>
<tr>
<td><strong>Compute</strong></td>
<td>$0.10/hour</td>
<td>Spot instances (70% savings)</td>
</tr>
<tr>
<td><strong>DNS</strong></td>
<td>$0.40/million</td>
<td>Caching (95% reduction)</td>
</tr>
<tr>
<td><strong>IP Rotation</strong></td>
<td>$0.001/request</td>
<td>Smart rotation (50% reduction)</td>
</tr>
</tbody>
</table>
<p><strong>Value-Based URL Selection:</strong></p>
<pre class="mermaid"><code>graph LR
    subgraph "Value Factors"
        DA[Domain Authority&lt;br/&gt;30%]
        CF[Content Freshness&lt;br/&gt;30%]
        LV[Link Value&lt;br/&gt;20%]
        UN[Uniqueness&lt;br/&gt;20%]
    end

    subgraph "Cost Factors"
        ES[Estimated Size]
        BC[Bandwidth Cost]
        SC[Storage Cost]
    end

    subgraph "Selection"
        VS[Value Score]
        CS[Cost Score]
        VPD[Value per Dollar]
    end

    DA --&gt; VS
    CF --&gt; VS
    LV --&gt; VS
    UN --&gt; VS

    ES --&gt; CS
    BC --&gt; CS
    SC --&gt; CS

    VS --&gt; VPD
    CS --&gt; VPD</code></pre>
<p><strong>Compression Savings:</strong></p>
<pre class="mermaid"><code>gantt
    title Bandwidth Usage Comparison
    dateFormat X
    axisFormat %s

    section Without Compression
    HTML (10MB)      :done, html1, 0, 10
    CSS/JS (5MB)     :done, css1, 10, 5
    Images (20MB)    :done, img1, 15, 20

    section With Compression
    HTML (3MB)       :done, html2, 0, 3
    CSS/JS (1MB)     :done, css2, 3, 1
    Images (18MB)    :done, img2, 4, 18

    section Savings
    Saved (13MB)     :active, save, 22, 13</code></pre>
<p><strong>Smart Scheduling Strategy:</strong></p>
<pre class="mermaid"><code>stateDiagram-v2
    [*] --&gt; CheckTime

    CheckTime --&gt; OffPeak: 2AM-6AM
    CheckTime --&gt; Peak: Other hours

    OffPeak --&gt; ScaleUp: Use spot instances
    Peak --&gt; ScaleDown: Use on-demand

    ScaleUp --&gt; HighThroughput: 70% cost savings
    ScaleDown --&gt; NormalThroughput: Reliable but costly

    HighThroughput --&gt; RecordSavings
    NormalThroughput --&gt; RecordCost

    RecordSavings --&gt; [*]
    RecordCost --&gt; [*]</code></pre>
<p><strong>Cost Report Dashboard:</strong></p>
<pre class="mermaid"><code>graph TB
    subgraph "Daily Metrics"
        DC[Daily Cost: $X]
        MP[Monthly Projection: $Y]
        BR[Budget Remaining: $Z]
    end

    subgraph "Cost Breakdown"
        BW[Bandwidth: $A]
        ST[Storage: $B]
        CM[Compute: $C]
        OT[Other: $D]
    end

    subgraph "Savings"
        CS[Compression: $E]
        DS[Dedup: $F]
        SS[Spot: $G]
        TS[Total Saved: $H]
    end

    subgraph "Efficiency"
        CPU[Cost/URL: $I]
        CPG[Cost/GB: $J]
        VPD[Value/$: K]
    end</code></pre>
<h3 id="comprehensive-law-mapping">🔍 Comprehensive Law Mapping<a class="headerlink" href="#comprehensive-law-mapping" title="Permanent link">&para;</a></h3>
<table>
<thead>
<tr>
<th>Design Decision</th>
<th>Axiom 1<br>(Latency)</th>
<th>Axiom 2<br>(Capacity)</th>
<th>Axiom 3<br>(Failure)</th>
<th>Axiom 4<br>(Concurrency)</th>
<th>Axiom 5<br>(Coordination)</th>
<th>Axiom 6<br>(Observability)</th>
<th>Axiom 7<br>(Human Interface)</th>
<th>Axiom 8<br>(Economics)</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Async I/O Everywhere</strong></td>
<td>✅ Non-blocking ops<br>Max throughput</td>
<td>✅ Handle 1000s<br>connections</td>
<td>✅ Timeout handling<br>graceful failures</td>
<td>✅ True parallelism<br>event loops</td>
<td>➖ Local decision<br>no coordination</td>
<td>📊 Connection metrics<br>per domain</td>
<td>✅ Intuitive async<br>programming model</td>
<td>✅ Max hardware<br>utilization</td>
</tr>
<tr>
<td><strong>Domain-based Queuing</strong></td>
<td>⚖️ Adds queue overhead<br>but ensures politeness</td>
<td>✅ Scales to millions<br>of domains</td>
<td>✅ Domain isolation<br>failure containment</td>
<td>✅ Parallel domains<br>serialize per-domain</td>
<td>🔄 Queue assignment<br>coordination</td>
<td>📊 Queue depth<br>per domain</td>
<td>✅ Clear domain<br>rate controls</td>
<td>✅ Prevents IP bans<br>maintains access</td>
</tr>
<tr>
<td><strong>Persistent URL Frontier</strong></td>
<td>⚖️ Disk I/O for<br>durability</td>
<td>✅ 100B+ URLs<br>RocksDB storage</td>
<td>✅ Survives crashes<br>checkpoint recovery</td>
<td>⚠️ Concurrent access<br>needs locking</td>
<td>🔄 Distributed frontier<br>sharding needed</td>
<td>📊 Frontier size<br>growth metrics</td>
<td>🛠️ Priority tuning<br>controls</td>
<td>⚖️ Storage costs<br>but necessary</td>
</tr>
<tr>
<td><strong>Bloom Filter Dedup</strong></td>
<td>✅ O(1) lookups<br>no DB hit</td>
<td>✅ ~10 bits per URL<br>memory efficient</td>
<td>✅ Reconstructible<br>from crawl history</td>
<td>✅ Lock-free reads<br>thread-safe</td>
<td>➖ Node-local<br>filters</td>
<td>📊 False positive<br>rate tracking</td>
<td>⚠️ Probabilistic may<br>miss some URLs</td>
<td>✅ 90% reduction<br>in storage ops</td>
</tr>
<tr>
<td><strong>Content Hashing</strong></td>
<td>⚖️ Hash computation<br>CPU overhead</td>
<td>✅ Compact hashes<br>vs full content</td>
<td>✅ Can rebuild<br>from pages</td>
<td>✅ Parallel hashing<br>in workers</td>
<td>➖ Local operation<br>no sync needed</td>
<td>📊 Duplicate rate<br>statistics</td>
<td>✅ Dedup transparent<br>to users</td>
<td>✅ Huge storage<br>savings</td>
</tr>
<tr>
<td><strong>Circuit Breakers</strong></td>
<td>✅ Fast fail for<br>bad domains</td>
<td>✅ Prevents resource<br>waste on failures</td>
<td>✅ Automatic recovery<br>with backoff</td>
<td>✅ Per-domain state<br>no global lock</td>
<td>➖ Each node tracks<br>independently</td>
<td>✅ Breaker state<br>dashboards</td>
<td>✅ Clear failure<br>visibility</td>
<td>✅ Saves bandwidth<br>on dead sites</td>
</tr>
<tr>
<td><strong>Robots.txt Caching</strong></td>
<td>✅ Avoid repeated<br>fetches</td>
<td>✅ Bounded cache<br>with TTL</td>
<td>✅ Fallback to<br>allow on failure</td>
<td>✅ Concurrent cache<br>reads</td>
<td>🔄 Cache invalidation<br>strategy</td>
<td>📊 Cache hit rate<br>robots compliance</td>
<td>✅ Respect site<br>owner wishes</td>
<td>✅ Reduces requests<br>saves bandwidth</td>
</tr>
<tr>
<td><strong>Distributed Workers</strong></td>
<td>⚖️ Network coordination<br>overhead</td>
<td>✅ Linear scaling<br>with nodes</td>
<td>✅ Node failures<br>don't stop crawl</td>
<td>✅ Massive parallelism<br>across nodes</td>
<td>🔄 Work distribution<br>via coordinator</td>
<td>📊 Worker health<br>and throughput</td>
<td>⚠️ Complex deployment<br>and debugging</td>
<td>✅ Use spot instances<br>for cost savings</td>
</tr>
<tr>
<td><strong>Checkpointing</strong></td>
<td>⚖️ Periodic I/O<br>for snapshots</td>
<td>✅ Incremental saves<br>bounded size</td>
<td>✅ Recovery point<br>for restarts</td>
<td>⚠️ Checkpoint consistency<br>across workers</td>
<td>🔄 Checkpoint coordination<br>via ZK</td>
<td>📊 Checkpoint lag<br>recovery time</td>
<td>✅ Restart capability<br>operational tool</td>
<td>✅ Prevents recrawl<br>saves resources</td>
</tr>
<tr>
<td><strong>Smart Scheduling</strong></td>
<td>⚖️ ML inference<br>overhead</td>
<td>✅ Prioritizes valuable<br>content</td>
<td>✅ Adapts to site<br>reliability</td>
<td>✅ Parallel scoring<br>and scheduling</td>
<td>🔄 Global priority<br>agreement</td>
<td>📊 Scheduling efficiency<br>metrics</td>
<td>⚠️ Complex tuning<br>parameters</td>
<td>✅ Crawls high-value<br>pages first</td>
</tr>
</tbody>
</table>
<h3 id="pillar-mapping">🏛️ Pillar Mapping<a class="headerlink" href="#pillar-mapping" title="Permanent link">&para;</a></h3>
<h4 id="work-distribution">Work Distribution<a class="headerlink" href="#work-distribution" title="Permanent link">&para;</a></h4>
<ul>
<li><strong>URL Assignment</strong>: Consistent hashing by domain</li>
<li><strong>Parallel Crawling</strong>: Async workers with domain isolation</li>
<li><strong>Task Queuing</strong>: Priority-based URL frontier</li>
<li><strong>Load Balancing</strong>: Work stealing between nodes</li>
</ul>
<h4 id="state-management">State Management<a class="headerlink" href="#state-management" title="Permanent link">&para;</a></h4>
<ul>
<li><strong>URL Frontier</strong>: Persistent priority queues</li>
<li><strong>Crawl History</strong>: Distributed deduplication</li>
<li><strong>Domain State</strong>: Rate limits and robots.txt</li>
<li><strong>Checkpoints</strong>: Periodic state snapshots</li>
</ul>
<h4 id="truth-consistency">Truth &amp; Consistency<a class="headerlink" href="#truth-consistency" title="Permanent link">&para;</a></h4>
<ul>
<li><strong>URL Uniqueness</strong>: Normalized URLs as truth</li>
<li><strong>Content Versioning</strong>: Track page changes</li>
<li><strong>Crawl Ordering</strong>: Best-effort time ordering</li>
<li><strong>Duplicate Detection</strong>: Content hashing</li>
</ul>
<h4 id="control-mechanisms">Control Mechanisms<a class="headerlink" href="#control-mechanisms" title="Permanent link">&para;</a></h4>
<ul>
<li><strong>Rate Limiting</strong>: Per-domain politeness</li>
<li><strong>Circuit Breakers</strong>: Failure isolation</li>
<li><strong>Orchestration</strong>: Leader-based scheduling</li>
<li><strong>Resource Limits</strong>: Memory and bandwidth caps</li>
</ul>
<h4 id="intelligence-layer">Intelligence Layer<a class="headerlink" href="#intelligence-layer" title="Permanent link">&para;</a></h4>
<ul>
<li><strong>Smart Scheduling</strong>: ML-based priority</li>
<li><strong>Trap Detection</strong>: Pattern recognition</li>
<li><strong>Content Quality</strong>: Relevance scoring</li>
<li><strong>Adaptive Crawling</strong>: Freshness prediction</li>
</ul>
<h3 id="pattern-application">🔧 Pattern Application<a class="headerlink" href="#pattern-application" title="Permanent link">&para;</a></h3>
<p><strong>Primary Patterns:</strong>
- <strong>Producer-Consumer</strong>: URL frontier feeding workers
- <strong>Bulkhead</strong>: Domain isolation
- <strong>Circuit Breaker</strong>: Failure handling
- <strong>Leader Election</strong>: Crawl coordination</p>
<p><strong>Supporting Patterns:</strong>
- <strong>Consistent Hashing</strong>: URL distribution
- <strong>Bloom Filter</strong>: Duplicate detection
- <strong>Rate Limiting</strong>: Politeness enforcement
- <strong>Checkpointing</strong>: State recovery</p>
<h3 id="architecture-alternatives">🏗️ Architecture Alternatives<a class="headerlink" href="#architecture-alternatives" title="Permanent link">&para;</a></h3>
<h4 id="alternative-1-focused-vertical-crawler">Alternative 1: Focused Vertical Crawler<a class="headerlink" href="#alternative-1-focused-vertical-crawler" title="Permanent link">&para;</a></h4>
<pre class="mermaid"><code>graph TB
    subgraph "Seed Management"
        SM[Seed Manager&lt;br/&gt;Domain whitelist]
    end

    subgraph "Single Node"
        Q[Priority Queue]
        F[Fetcher]
        P[Parser]
        S[Storage]
    end

    subgraph "External"
        ML[ML Classifier]
        API[Export API]
    end

    SM --&gt; Q
    Q --&gt; F
    F --&gt; P
    P --&gt; S
    P --&gt; ML
    ML --&gt; Q
    S --&gt; API

    style F fill:#90EE90
    style ML fill:#FFE4B5</code></pre>
<p><strong>Characteristics:</strong>
- Single machine, focused domains
- Deep crawling with ML filtering
- High precision, low scale
- Simple operation</p>
<h4 id="alternative-2-serverless-crawler">Alternative 2: Serverless Crawler<a class="headerlink" href="#alternative-2-serverless-crawler" title="Permanent link">&para;</a></h4>
<pre class="mermaid"><code>graph TB
    subgraph "Trigger"
        CW[CloudWatch&lt;br/&gt;Schedule]
        SQS[SQS Queue]
    end

    subgraph "Lambda Functions"
        L1[URL Fetcher]
        L2[Parser]
        L3[Link Extractor]
        L4[Storage Writer]
    end

    subgraph "Storage"
        S3[(S3 Pages)]
        DDB[(DynamoDB&lt;br/&gt;Metadata)]
    end

    CW --&gt; SQS
    SQS --&gt; L1
    L1 --&gt; L2
    L2 --&gt; L3 &amp; L4
    L3 --&gt; SQS
    L4 --&gt; S3 &amp; DDB

    style L1 fill:#e3f2fd
    style L2 fill:#e3f2fd
    style L3 fill:#e3f2fd
    style L4 fill:#e3f2fd</code></pre>
<p><strong>Characteristics:</strong>
- No infrastructure management
- Auto-scaling
- Pay per crawl
- Limited by Lambda constraints</p>
<h4 id="alternative-3-browser-based-crawler">Alternative 3: Browser-Based Crawler<a class="headerlink" href="#alternative-3-browser-based-crawler" title="Permanent link">&para;</a></h4>
<pre class="mermaid"><code>graph TB
    subgraph "Controller"
        C[Crawl Controller]
        Q[URL Queue]
    end

    subgraph "Browser Farm"
        B1[Chrome 1]
        B2[Chrome 2]
        BN[Chrome N]

        subgraph "Per Browser"
            PD[Puppeteer&lt;br/&gt;Driver]
            JS[JS Engine]
        end
    end

    subgraph "Processing"
        R[Renderer]
        E[Extractor]
        S[Screenshot]
    end

    C --&gt; Q
    Q --&gt; B1 &amp; B2 &amp; BN
    B1 &amp; B2 &amp; BN --&gt; R
    R --&gt; E &amp; S

    style B1 fill:#c8e6c9
    style B2 fill:#c8e6c9
    style BN fill:#c8e6c9</code></pre>
<p><strong>Characteristics:</strong>
- Handles JavaScript sites
- Screenshots and rendering
- High resource usage
- Complex debugging</p>
<h4 id="alternative-4-distributed-stream-processing">Alternative 4: Distributed Stream Processing<a class="headerlink" href="#alternative-4-distributed-stream-processing" title="Permanent link">&para;</a></h4>
<pre class="mermaid"><code>graph LR
    subgraph "Ingestion"
        K1[Kafka URLs]
    end

    subgraph "Stream Processing"
        F1[Flink Job 1&lt;br/&gt;Fetching]
        F2[Flink Job 2&lt;br/&gt;Parsing]
        F3[Flink Job 3&lt;br/&gt;Dedup]
    end

    subgraph "Output"
        K2[Kafka Pages]
        ES[(ElasticSearch)]
        HB[(HBase)]
    end

    K1 --&gt; F1
    F1 --&gt; F2
    F2 --&gt; F3
    F3 --&gt; K2
    K2 --&gt; ES &amp; HB

    style F1 fill:#fff9c4
    style F2 fill:#fff9c4
    style F3 fill:#fff9c4</code></pre>
<p><strong>Characteristics:</strong>
- Stream processing paradigm
- Built-in fault tolerance
- Complex operations
- High operational overhead</p>
<h4 id="alternative-5-edge-distributed-crawler">Alternative 5: Edge-Distributed Crawler<a class="headerlink" href="#alternative-5-edge-distributed-crawler" title="Permanent link">&para;</a></h4>
<pre class="mermaid"><code>graph TB
    subgraph "Central"
        CC[Central&lt;br/&gt;Controller]
        GQ[Global Queue]
    end

    subgraph "Edge Locations"
        subgraph "US-East"
            E1[Edge Crawler]
            C1[(Local Cache)]
        end

        subgraph "EU-West"
            E2[Edge Crawler]
            C2[(Local Cache)]
        end

        subgraph "Asia-Pac"
            E3[Edge Crawler]
            C3[(Local Cache)]
        end
    end

    subgraph "Storage"
        CS[(Central Storage)]
    end

    CC --&gt; GQ
    GQ --&gt; E1 &amp; E2 &amp; E3
    E1 --&gt; C1
    E2 --&gt; C2
    E3 --&gt; C3
    C1 &amp; C2 &amp; C3 -.-&gt;|Sync| CS

    style E1 fill:#bbdefb
    style E2 fill:#bbdefb
    style E3 fill:#bbdefb</code></pre>
<p><strong>Characteristics:</strong>
- Geographic distribution
- Low latency to regional sites
- Complex synchronization
- Higher infrastructure cost</p>
<h3 id="trade-off-analysis">⚖️ Trade-off Analysis<a class="headerlink" href="#trade-off-analysis" title="Permanent link">&para;</a></h3>
<table>
<thead>
<tr>
<th>Architecture</th>
<th>Scale</th>
<th>Complexity</th>
<th>Cost</th>
<th>JS Support</th>
<th>Latency</th>
<th>Fault Tolerance</th>
<th>Ops Overhead</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Focused Vertical</strong></td>
<td>Low</td>
<td>Simple</td>
<td>Low</td>
<td>None</td>
<td>Low</td>
<td>Limited</td>
<td>Minimal</td>
</tr>
<tr>
<td><strong>Serverless</strong></td>
<td>Medium</td>
<td>Medium</td>
<td>Variable</td>
<td>None</td>
<td>Medium</td>
<td>High</td>
<td>None</td>
</tr>
<tr>
<td><strong>Browser-Based</strong></td>
<td>Medium</td>
<td>High</td>
<td>High</td>
<td>Full</td>
<td>High</td>
<td>Medium</td>
<td>High</td>
</tr>
<tr>
<td><strong>Stream Processing</strong></td>
<td>High</td>
<td>Very High</td>
<td>High</td>
<td>None</td>
<td>Low</td>
<td>Excellent</td>
<td>Very High</td>
</tr>
<tr>
<td><strong>Edge-Distributed</strong></td>
<td>High</td>
<td>High</td>
<td>High</td>
<td>Partial</td>
<td>Very Low</td>
<td>High</td>
<td>High</td>
</tr>
</tbody>
</table>
<h3 id="performance-scale-comparison">📊 Performance &amp; Scale Comparison<a class="headerlink" href="#performance-scale-comparison" title="Permanent link">&para;</a></h3>
<pre class="mermaid"><code>graph LR
    subgraph "Pages/Second"
        A[Focused: 100]
        B[Serverless: 1K]
        C[Browser: 10]
        D[Stream: 100K]
        E[Edge: 50K]
    end

    A --&gt;|10x| B
    B --&gt;|0.01x| C
    B --&gt;|100x| D
    D --&gt;|0.5x| E</code></pre>
<pre class="mermaid"><code>graph TB
    subgraph "Cost per Million Pages"
        T1[Focused&lt;br/&gt;$10]
        T2[Serverless&lt;br/&gt;$100]
        T3[Browser&lt;br/&gt;$1000]
        T4[Stream&lt;br/&gt;$50]
        T5[Edge&lt;br/&gt;$200]
    end

    T1 --&gt;|10x| T2
    T2 --&gt;|10x| T3
    T1 --&gt;|5x| T4
    T4 --&gt;|4x| T5</code></pre>
<h2 id="part-2-architecture-trade-offs">Part 2: Architecture &amp; Trade-offs<a class="headerlink" href="#part-2-architecture-trade-offs" title="Permanent link">&para;</a></h2>
<h3 id="core-architecture">🏗️ Core Architecture<a class="headerlink" href="#core-architecture" title="Permanent link">&para;</a></h3>
<pre class="mermaid"><code>graph TB
    subgraph "Seed Sources"
        SS1[Seed URLs]
        SS2[Sitemap]
        SS3[RSS Feeds]
    end

    subgraph "URL Frontier"
        PQ[Priority Queues]
        DQ[Domain Queues]
        BF[Bloom Filter]
    end

    subgraph "Crawler Workers"
        CW1[Worker 1]
        CW2[Worker 2]
        CWN[Worker N]

        subgraph "Worker Components"
            FE[Fetcher]
            PA[Parser]
            EX[Extractor]
        end
    end

    subgraph "Politeness"
        RT[Robots.txt Cache]
        RL[Rate Limiter]
        CB[Circuit Breaker]
    end

    subgraph "Storage"
        PS[(Page Store)]
        MS[(Metadata Store)]
        LS[(Link Store)]
        IS[(Index)]
    end

    subgraph "Coordination"
        ZK[Zookeeper]
        LE[Leader Election]
    end

    subgraph "Monitoring"
        PM[Prometheus]
        GR[Grafana]
    end

    SS1 &amp; SS2 &amp; SS3 --&gt; PQ
    PQ --&gt; DQ
    DQ --&gt; CW1 &amp; CW2 &amp; CWN

    CW1 &amp; CW2 &amp; CWN --&gt; RT
    CW1 &amp; CW2 &amp; CWN --&gt; RL
    CW1 &amp; CW2 &amp; CWN --&gt; CB

    CW1 &amp; CW2 &amp; CWN --&gt; PS
    CW1 &amp; CW2 &amp; CWN --&gt; MS
    CW1 &amp; CW2 &amp; CWN --&gt; LS

    CW1 &amp; CW2 &amp; CWN -.-&gt; BF

    ZK --&gt; LE
    LE --&gt; CW1 &amp; CW2 &amp; CWN

    CW1 &amp; CW2 &amp; CWN --&gt; PM
    PM --&gt; GR

    style PQ fill:#e3f2fd
    style CW1 fill:#c8e6c9
    style CW2 fill:#c8e6c9
    style CWN fill:#c8e6c9
    style PS fill:#fff9c4</code></pre>
<h3 id="key-design-trade-offs">⚖️ Key Design Trade-offs<a class="headerlink" href="#key-design-trade-offs" title="Permanent link">&para;</a></h3>
<table>
<thead>
<tr>
<th>Decision</th>
<th>Option A</th>
<th>Option B</th>
<th>Choice &amp; Rationale</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>URL Storage</strong></td>
<td>In-memory</td>
<td>Persistent DB</td>
<td><strong>Hybrid</strong> - Hot URLs in memory, cold in RocksDB for scale</td>
</tr>
<tr>
<td><strong>Deduplication</strong></td>
<td>Exact (DB)</td>
<td>Probabilistic (Bloom)</td>
<td><strong>Bloom + DB</strong> - Bloom for speed, DB for accuracy when needed</td>
</tr>
<tr>
<td><strong>Politeness</strong></td>
<td>Global queue</td>
<td>Per-domain queues</td>
<td><strong>Per-domain</strong> - Ensures politeness without blocking other domains</td>
</tr>
<tr>
<td><strong>Content Storage</strong></td>
<td>Store everything</td>
<td>Store selectively</td>
<td><strong>Selective</strong> - Store based on quality score to manage costs</td>
</tr>
<tr>
<td><strong>Architecture</strong></td>
<td>Monolithic</td>
<td>Distributed</td>
<td><strong>Distributed</strong> - Required for web-scale crawling</td>
</tr>
</tbody>
</table>
<h3 id="alternative-architectures">🔄 Alternative Architectures<a class="headerlink" href="#alternative-architectures" title="Permanent link">&para;</a></h3>
<h4 id="option-1-single-machine-crawler">Option 1: Single-Machine Crawler<a class="headerlink" href="#option-1-single-machine-crawler" title="Permanent link">&para;</a></h4>
<pre class="mermaid"><code>graph LR
    U[URL Queue] --&gt; F[Fetcher]
    F --&gt; P[Parser]
    P --&gt; S[Storage]
    P --&gt; U</code></pre>
<p><strong>Pros</strong>: Simple, easy to debug, no coordination
<strong>Cons</strong>: Limited scale, single point of failure
<strong>When to use</strong>: Focused crawling, &lt;1M pages</p>
<h4 id="option-2-master-worker">Option 2: Master-Worker<a class="headerlink" href="#option-2-master-worker" title="Permanent link">&para;</a></h4>
<pre class="mermaid"><code>graph TB
    M[Master] --&gt; W1[Worker 1]
    M --&gt; W2[Worker 2]
    M --&gt; WN[Worker N]
    W1 &amp; W2 &amp; WN --&gt; M</code></pre>
<p><strong>Pros</strong>: Simple coordination, easy work distribution
<strong>Cons</strong>: Master bottleneck, SPOF
<strong>When to use</strong>: Medium scale, trusted environment</p>
<h4 id="option-3-peer-to-peer">Option 3: Peer-to-Peer<a class="headerlink" href="#option-3-peer-to-peer" title="Permanent link">&para;</a></h4>
<pre class="mermaid"><code>graph TB
    P1[Peer 1] &lt;--&gt; P2[Peer 2]
    P2 &lt;--&gt; P3[Peer 3]
    P3 &lt;--&gt; P1</code></pre>
<p><strong>Pros</strong>: No SPOF, natural failover
<strong>Cons</strong>: Complex coordination, network overhead
<strong>When to use</strong>: Highly distributed, unreliable nodes</p>
<h4 id="option-4-stream-based">Option 4: Stream-Based<a class="headerlink" href="#option-4-stream-based" title="Permanent link">&para;</a></h4>
<pre class="mermaid"><code>graph LR
    U[URLs] --&gt; K[Kafka]
    K --&gt; C1[Crawler 1]
    K --&gt; C2[Crawler 2]
    C1 &amp; C2 --&gt; K2[Kafka]
    K2 --&gt; S[Storage]</code></pre>
<p><strong>Pros</strong>: Scalable, fault-tolerant, replay capability
<strong>Cons</strong>: Operational complexity, latency
<strong>When to use</strong>: Large scale, need replay/audit</p>
<h3 id="performance-characteristics">📊 Performance Characteristics<a class="headerlink" href="#performance-characteristics" title="Permanent link">&para;</a></h3>
<p><strong>Crawling Performance:</strong>
<div class="language-text highlight"><pre><span></span><code><span id="__span-8-1"><a id="__codelineno-8-1" name="__codelineno-8-1" href="#__codelineno-8-1"></a>Metric              Single    Distributed   Notes
</span><span id="__span-8-2"><a id="__codelineno-8-2" name="__codelineno-8-2" href="#__codelineno-8-2"></a>Pages/second        100       10,000+       With 100 nodes
</span><span id="__span-8-3"><a id="__codelineno-8-3" name="__codelineno-8-3" href="#__codelineno-8-3"></a>Bandwidth           100Mbps   10Gbps+       Aggregate
</span><span id="__span-8-4"><a id="__codelineno-8-4" name="__codelineno-8-4" href="#__codelineno-8-4"></a>URL Frontier        1M        100B+         Distributed storage
</span><span id="__span-8-5"><a id="__codelineno-8-5" name="__codelineno-8-5" href="#__codelineno-8-5"></a>Dedup Accuracy      100%      99.9%         Bloom filter
</span></code></pre></div></p>
<p><strong>Resource Usage:</strong>
<div class="language-text highlight"><pre><span></span><code><span id="__span-9-1"><a id="__codelineno-9-1" name="__codelineno-9-1" href="#__codelineno-9-1"></a>Component         Memory    CPU      Storage
</span><span id="__span-9-2"><a id="__codelineno-9-2" name="__codelineno-9-2" href="#__codelineno-9-2"></a>Worker            4GB       2 cores  100GB
</span><span id="__span-9-3"><a id="__codelineno-9-3" name="__codelineno-9-3" href="#__codelineno-9-3"></a>Frontier Node     16GB      4 cores  1TB
</span><span id="__span-9-4"><a id="__codelineno-9-4" name="__codelineno-9-4" href="#__codelineno-9-4"></a>Coordinator       8GB       2 cores  10GB
</span><span id="__span-9-5"><a id="__codelineno-9-5" name="__codelineno-9-5" href="#__codelineno-9-5"></a>Storage Node      32GB      8 cores  10TB
</span></code></pre></div></p>
<h3 id="key-lessons">🎓 Key Lessons<a class="headerlink" href="#key-lessons" title="Permanent link">&para;</a></h3>
<ol>
<li>
<p><strong>Politeness is Paramount</strong>: Respect robots.txt and crawl delays. Aggressive crawling leads to IP bans.</p>
</li>
<li>
<p><strong>Frontier Design is Critical</strong>: The URL frontier becomes the bottleneck. Distributed, persistent design essential.</p>
</li>
<li>
<p><strong>Duplicate Detection at Scale is Hard</strong>: Perfect deduplication is expensive. Probabilistic methods with occasional false positives acceptable.</p>
</li>
<li>
<p><strong>Trap Detection Saves Resources</strong>: Spider traps and infinite spaces waste resources. Pattern detection crucial.</p>
</li>
<li>
<p><strong>Adaptive Crawling Wins</strong>: Static priorities fail. ML-based scheduling improves freshness and coverage.</p>
</li>
</ol>
<h3 id="related-concepts-deep-dives">🔗 Related Concepts &amp; Deep Dives<a class="headerlink" href="#related-concepts-deep-dives" title="Permanent link">&para;</a></h3>
<p><strong>Prerequisite Understanding:</strong>
- <a href="../../part1-axioms/axiom3-emergence/">Law 3: Emergence 🌪️</a> - Massive parallelism patterns
- <a href="../../part1-axioms/axiom6-human-api/">Law 6: Human-API 🤯</a> - Crawler ethics and robots.txt
- <a href="../../patterns/queues-streaming/">Queue Patterns</a> - Priority queue implementations
- <a href="../../patterns/bulkhead/">Bulkhead Pattern</a> - Domain isolation strategies</p>
<p><strong>Advanced Topics:</strong>
- <a href="../../patterns/js-crawling/">JavaScript Crawling</a> - Headless browser techniques
- <a href="../../patterns/crawler-traps/">Trap Detection</a> - Identifying infinite spaces
- <a href="../../patterns/distributed-dedup/">Distributed Deduplication</a> - At-scale duplicate detection
- <a href="../../patterns/adaptive-scheduling/">Adaptive Scheduling</a> - ML-based crawl prioritization</p>
<p><strong>Related Case Studies:</strong></p>
<!-- TODO: Add search engine case study -->
<!-- TODO: Add web archive case study -->
<!-- TODO: Add price monitor case study -->

<p><strong>Implementation Patterns:</strong>
- <a href="../../patterns/politeness/">Politeness Policies</a> - Respectful crawling
- <a href="../../patterns/url-normalization/">URL Normalization</a> - Canonical URLs
- <a href="../../patterns/content-extraction/">Content Extraction</a> - Parsing strategies
- <a href="../../patterns/url-frontier/">Frontier Management</a> - Scalable queue design</p>
<h3 id="references">📚 References<a class="headerlink" href="#references" title="Permanent link">&para;</a></h3>
<p><strong>Papers:</strong>
- <a href="https://research.google/pubs/pub46428/">The Evolution of Web Crawling</a>
- <a href="http://irl.cs.tamu.edu/people/hsin-tsang/papers/www2008.pdf">IRLbot: Scaling to 6 Billion Pages</a>
- <a href="https://courses.cs.washington.edu/courses/cse454/15wi/papers/mercator.pdf">Mercator: A Scalable, Extensible Web Crawler</a></p>
<p><strong>Open Source Crawlers:</strong>
- <a href="https://nutch.apache.org/">Apache Nutch</a>
- <a href="https://scrapy.org/">Scrapy</a>
- <a href="https://github.com/gocolly/colly">Colly</a>
- <a href="https://github.com/internetarchive/heritrix3">Heritrix</a></p>
<p><strong>Related Patterns:</strong>
- <a href="../../patterns/priority-queue/">URL Frontier Management</a>
- <a href="../../patterns/rate-limiting/">Politeness Policy</a>
- <a href="../../patterns/bloom-filter/">Duplicate Detection</a>
- <a href="../../patterns/leader-election/">Distributed Coordination</a></p>







  
  






                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
</div>
      
        <div class="md-social">
  
    
    
    
    
      
      
    
    <a href="https://github.com/deepaucksharma" target="_blank" rel="noopener" title="github.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://twitter.com/deepaucksharma" target="_blank" rel="noopener" title="twitter.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
      <div class="md-progress" data-md-component="progress" role="progressbar"></div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "../..", "features": ["navigation.instant", "navigation.instant.prefetch", "navigation.instant.progress", "navigation.tracking", "navigation.tabs", "navigation.sections", "navigation.expand", "navigation.path", "navigation.indexes", "toc.follow", "toc.integrate", "search.suggest", "search.highlight", "search.share", "content.code.copy", "content.code.annotate", "content.action.edit"], "search": "../../assets/javascripts/workers/search.d50fe291.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../../assets/javascripts/bundle.56ea9cef.min.js"></script>
      
        <script src="https://unpkg.com/mermaid@10.6.0/dist/mermaid.min.js"></script>
      
        <script src="../../javascripts/mermaid-init.js"></script>
      
        <script src="../../javascripts/summarizer.js"></script>
      
    
  </body>
</html>